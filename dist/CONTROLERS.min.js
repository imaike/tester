!function(I){function g(A){if(C[A])return C[A].exports;var n=C[A]={i:A,l:!1,exports:{}};return I[A].call(n.exports,n,n.exports,g),n.l=!0,n.exports}var C={};g.m=I,g.c=C,g.i=function(I){return I},g.d=function(I,C,A){g.o(I,C)||Object.defineProperty(I,C,{configurable:!1,enumerable:!0,get:A})},g.n=function(I){var C=I&&I.__esModule?function(){return I.default}:function(){return I};return g.d(C,"a",C),C},g.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},g.p="",g(g.s=1)}([,function(module,exports){eval('//Ken-Q Analysis\n//Copyright (C) 2016 Shawn Banasick\n//\n//    This program is free software: you can redistribute it and/or modify\n//    it under the terms of the GNU General Public License as published by\n//    the Free Software Foundation, either version 3 of the License, or\n//    (at your option) any later version.\n\n\n// JSlint declarations\n/* global window, $, resources, EXCEL, FIREBASE, DEMO, d3, INPUT, ROTA, VARIMAX, OUTPUT, LOAD, localStorage, _, d3_save_svg, document, Huebee, PASTE, CORR, sessionStorage, CENTROID, VIEW, PCA, QAV, UTIL, performance*/\n\n(function (CONTROLERS, QAV, undefined) {\n\n    /*\n    //\n    // **** SECTION 1 **** data input\n    //\n    */\n\n    // ***** Persist Pasted Sort Data in PQMethod input section *****************\n    // todo - move this to manual input file?\n\n    // Use Demo Data Set Option - display database selected\n    (function () {\n        $("#existingDatabaseSelect").change(function () {\n            var testValue = $(this).val();\n            if (testValue === "Lipset") {\n                DEMO.returnLipset();\n            } else if (testValue === "Medium") {\n                DEMO.returnMedium();\n            } else if (testValue === "Large") {\n                DEMO.returnQuotes();\n            }\n        });\n    })();\n\n\n    // call check manual input sort symmetry\n    (function () {\n        $("#sortInputSubmit").on(\'click\', function (e) {\n            e.preventDefault();\n            INPUT.isSortSymmetric();\n            $(\'#respondentNameInput1\').focus();\n        });\n    })();\n\n    (function () {\n        var input = document.getElementById(\'sortInputBox\');\n\n        // pull user input from memory if it exists\n        var temp1 = localStorage.getItem("sortInputBox");\n        if (temp1) {\n            input.value = temp1;\n        }\n\n        // capture sorts from user-input and set into memory\n        $(\'#sortInputBox\').on(\'input propertychange change\', function () {\n            localStorage.setItem("sortInputBox", this.value);\n        });\n    })();\n\n    (function () {\n        $(\'#stageDataPqmethod\').on(\'click\', function () {\n            PASTE.stageDataPqmethod();\n        });\n    })();\n\n    // to clear so new data can be added\n    (function () {\n        $("#clearInputBoxDataButton").on("click", function () {\n            $("#sortInputBox").val("");\n            localStorage.setItem("sortInputBox", "");\n            QAV.setState("sortInputBox", "");\n            $("#statementsInputBoxPqmethod").val("");\n            localStorage.setItem("qavStatementsInputBoxPqmethod", "");\n        });\n    })();\n\n    // import EXCEL files\n    (function () {\n        $("#fileSelect").on("change", function (e) {\n            QAV.setState("typeOfExcelFile", "user-input");\n            EXCEL.filePicked(e);\n        });\n    })();\n\n\n    // import Unforced EXCEL files\n    (function () {\n        $("#fileSelectUnforced").on("change", function (e) {\n            QAV.setState("typeOfExcelFile", "unforced");\n            EXCEL.filePicked(e);\n        });\n    })();\n\n    // import Ken-Q output files to EXCEL\n    (function () {\n        $("#fileSelectKenq").on("change", function (e) {\n            EXCEL.filePickedKenq(e);\n        });\n    })();\n\n    // import DAT files to PASTE\n    (function () {\n        $("#fileSelectPQM").on("change", function (e) {\n            PASTE.filePickedTextPQM(e);\n        });\n    })();\n\n    // import STA files to PASTE\n    (function () {\n        $("#fileSelectSTA").on("change", function (e) {\n            PASTE.filePickedTextSTA(e);\n        });\n    })();\n\n    // import STA files to PASTE     displayJsonData\n    (function () {\n        $("#fileSelectJSON").on("change", function (e) {\n            FIREBASE.filePickedJSON(e);\n        });\n    })();\n\n    (function () {\n        $("#stageJsonData").on("click", function (e) {\n            FIREBASE.stageJsonData(e);\n            $(".jsonDownloadPQ").show();\n        });\n    })();\n\n    (function () {\n        $("#downloadJsonData").on("click", function (e) {\n            FIREBASE.downloadJsonData(e);\n        });\n    })();\n\n    (function () {\n        $("#existingDatabaseRespondentList").on("click", "button", function (e) {\n            e.preventDefault();\n            var index = $(this).parent().index();\n            $(this).parent().remove();\n            var respondentNames = QAV.getState("qavRespondentNames");\n            var sorts = QAV.getState("qavRespondentSortsFromDbStored");\n            respondentNames.splice(index, 1);\n            sorts.splice(index, 1);\n\n            if ($.fn.DataTable.isDataTable(\'#correlationTable2\')) {\n                $(\'#correlationTable2\').DataTable().destroy();\n                $(\'#correlationTable2\').html("");\n            }\n\n            QAV.setState("qavRespondentNames", respondentNames);\n            QAV.setState("qavRespondentSortsFromDbStored", sorts);\n        });\n    })();\n\n    (function () {\n        $("#exportJsonSortsPQM").on("click", function (e) {\n            e.preventDefault();\n            EXCEL.exportExcelSortsPQM();\n        });\n    })();\n\n    (function () {\n        $("#exportStatementsPQM").on("click", function (e) {\n            e.preventDefault();\n            EXCEL.exportStatementsToPqmethod();\n        });\n    })();\n\n\n    (function () {\n        $("#clearAnalysisDataButton").on("click", function (e) {\n            e.preventDefault();\n            $("#existingDatabaseStatementList").empty();\n            $("#existingDatabaseRespondentList").empty();\n            if ($.fn.DataTable.isDataTable(\'#correlationTable2\')) {\n                $(\'#correlationTable2\').DataTable().destroy();\n                $(\'#correlationTable2\').html("");\n            }\n            $(".pqmButton").hide();\n        });\n    })();\n\n    (function () {\n        $("#disableSymmetryButton").on("click", function (e) {\n            e.preventDefault();\n            var language = QAV.getState("language");\n            var noSymmButText = resources[language].translation["Symmetry Check Disabled"];\n            var symmButText = resources[language].translation["Disable Symmetry Check"];\n            var button = $(this);\n            if (button.hasClass("buttonActionComplete")) {\n                button.prop(\'value\', symmButText);\n                button.addClass("blackHover");\n                button.removeClass("buttonActionComplete");\n                QAV.setState("doSymmetryCheck", "true");\n            } else {\n                button.prop(\'value\', noSymmButText);\n                button.removeClass("blackHover");\n                button.addClass("buttonActionComplete");\n                QAV.setState("doSymmetryCheck", "false");\n            }\n        });\n    })();\n\n    (function () {\n        $("#disableErrorSoundButton").on("click", function (e) {\n            e.preventDefault();\n            var language = QAV.getState("language");\n            var noErrorButText = resources[language].translation["AUDIO ERROR WARNING DISABLED"];\n            var errorButText = resources[language].translation["Disable Audio Error Warning"];\n            var button = $(this);\n            if (button.hasClass("buttonActionComplete")) {\n                button.prop(\'value\', errorButText);\n                button.addClass("blackHover");\n                button.removeClass("buttonActionComplete");\n                QAV.setState("doErrorSound", "true");\n            } else {\n                button.prop(\'value\', noErrorButText);\n                button.removeClass("blackHover");\n                button.addClass("buttonActionComplete");\n                QAV.setState("doErrorSound", "false");\n            }\n        });\n    })();\n\n    /*\n    //\n    // **** SECTION 2 **** correlations\n    //\n    */\n\n\n    // start correlation anaysis from demo data\n    (function () {\n        $("#beginAnalysisLocalData").on("click", function () {\n            CORR.createCorrelationTable();\n            $("#section4 > div.row.factorExtrafactorExtractionButtonDiv").show();\n        });\n    })();\n\n\n    /*\n    //\n    // **** SECTION 3 **** factor extractions\n    //\n    */\n    // to start pca and draw PCA table\n    (function () {\n        document.getElementById("PcaExtractionButton").addEventListener("click", function () {\n\n            var button, button2, X, t0, t1;\n\n            // var language = QAV.getState("language");\n            // var PcaButText = resources[language].translation["Principal components"];\n\n            t0 = performance.now();\n\n            //   button = $(this);\n            // button.removeClass("blackHover");\n            // button.addClass("buttonActionComplete");\n            // button.prop(\'value\', PcaButText);\n            // button.prop(\'disabled\', true);\n\n            // button2 = $("#factorExtractionButton");\n            // button2.prop(\'disabled\', true);\n\n            // $("#resetAnalysisButton").prop(\'disabled\', false);\n\n            X = QAV.getState("originalCorrelationValues");\n            PCA.doPrincipalComponents(X);\n\n            QAV.setState("numFactorsExtracted", 8);\n\n            t1 = performance.now();\n\n            console.log(\'%c PCA completed in \' + (t1 - t0).toFixed(0) + \' milliseconds\', \'background: black; color: white\');\n\n            $("#section5 > div.row.factorsToKeepForRotationDiv").show();\n\n\n            // required for firefox to register event\n            return false;\n        });\n    })();\n\n\n    // Centroid factor extration button listener\n    (function () {\n        $("#factorExtractionButton").on("click", function () {\n\n            var button2, dataArray;\n            var language = QAV.getState("language");\n            var centFacButText = resources[language].translation["Centroid factors"];\n\n            CENTROID.fireFactorExtraction();\n            $(this).removeClass("blackHover").addClass("buttonActionComplete").prop(\'value\', centFacButText).prop(\'disabled\', true);\n\n            button2 = $("#PcaExtractionButton");\n            button2.prop(\'disabled\', true);\n\n            $("#resetAnalysisButton").prop(\'disabled\', false);\n\n            CENTROID.drawExtractedFactorsTable();\n\n            // draw scree plot\n            dataArray = QAV.getState("centroidEigenvalues");\n            dataArray.shift();\n            UTIL.drawScreePlot(dataArray);\n\n            $("#section4 > input").show();\n            $("#section5 > div.row.factorsToKeepForRotationDiv").show();\n\n            // required for firefox to register event?\n            return false;\n        });\n    })();\n\n    // clear view for reset analysis\n    (function () {\n        $("#resetAnalysisButton").on("click", function () {\n\n            VIEW.destroyExtractionTables();\n            $(this).prop(\'disabled\', true);\n\n            d3.select("#screePlotDiv svg").remove();\n            $("#section4 > input").hide();\n\n            VIEW.clearSections_4_5_6();\n            // num factors to keep div\n            $("#section5 > div.row.factorsToKeepForRotationDiv").hide();\n\n            // reset state\n            QAV.setState("rotFacStateArray", "");\n            QAV.setState("tempRotFacStateArray", "");\n            QAV.setState("numberFactorsExtracted", "");\n            QAV.setState("fSigCriterion", "");\n            QAV.setState("rowH2", "");\n            QAV.setState("fSigCriterionResults", "");\n            QAV.setState("expVar", "");\n            QAV.setState("columnHeadersArray", "");\n            QAV.setState("saveRotationCounter", "");\n            QAV.setState("rotFacStateArrayArchive1", "");\n            QAV.setState("centroidFactors", "");\n            QAV.setState("analysisOutput", "");\n            QAV.setState("factorMatrixTransposed", "");\n\n            QAV.setState("centroidFactors", "");\n            QAV.setState("typeOfFactor", "");\n            QAV.setState("pcaNumberFactorsExtracted", "");\n            QAV.setState("factorLabels", "");\n            QAV.setState("eigenValuesSorted", "");\n            QAV.setState("eigenValuesAsPercents", "");\n            QAV.setState("eigenValuesCumulPercentArray", "");\n            QAV.setState("eigenVecs", "");\n            QAV.setState("numFactorsExtracted", "");\n            QAV.setState("pcaTableHeaders", "");\n            QAV.setState("pcaTableTargets", "");\n            QAV.setState("numFactorsRetained", "");\n            QAV.setState("typeOfRotation", "");\n\n            // required for firefox to register event\n            return false;\n        });\n    })();\n\n    /*\n    //\n    // **** SECTION 4 **** Rotation\n    //\n    */\n\n    (function () {\n        // rotation button 1 event listener\n        $("#clockwiseButton").on("click", function (e) {\n            e.preventDefault();\n            var rotationDegreeDisplayValue = parseInt(sessionStorage.getItem("rotationDegreeDisplayValue"));\n\n            var rotationDegree = parseInt($("#rotationDisplayInput").val());\n            rotationDegreeDisplayValue = rotationDegreeDisplayValue + rotationDegree;\n            var rotationDegreeDisplay = $("#handRotationDisplayContainer div");\n            rotationDegreeDisplay.html(rotationDegreeDisplayValue + "&deg");\n\n            sessionStorage.setItem("rotationDegreeDisplayValue", rotationDegreeDisplayValue);\n\n            ROTA.saveRotationButtonColor(rotationDegreeDisplayValue);\n\n            ROTA.calculateRotatedFactors(rotationDegree);\n        });\n    })();\n\n    // rotation button 2 event listener\n    (function () {\n        $("#counter-clockwiseButton").on("click", function (e) {\n            e.preventDefault();\n            var rotationDegreeDisplayValue = sessionStorage.getItem("rotationDegreeDisplayValue");\n\n            var rotationDegree = parseInt($("#rotationDisplayInput").val());\n            rotationDegreeDisplayValue = rotationDegreeDisplayValue - rotationDegree;\n\n            var rotationDegreeDisplay = $("#handRotationDisplayContainer div");\n            rotationDegreeDisplay.html(rotationDegreeDisplayValue + "&deg");\n            rotationDegree = -rotationDegree;\n\n            sessionStorage.setItem("rotationDegreeDisplayValue", rotationDegreeDisplayValue);\n\n            ROTA.saveRotationButtonColor(rotationDegreeDisplayValue);\n            ROTA.calculateRotatedFactors(rotationDegree);\n        });\n    })();\n\n    // push rotation values to rotation table and array\n    (function () {\n        $("#saveRotationButton").on("click", function (e) {\n            e.preventDefault();\n            var testForSplit = QAV.getState("hasSplitFactor");\n            if (testForSplit > 0) {\n                VIEW.showDisabledFunctionsAfterSplitModal();\n            } else {\n                ROTA.saveRotation();\n            }\n        });\n    })();\n\n\n    // triggered by "Display Selected Factors" button\n    (function () {\n        $("#generateRotationItemsButton").on("click", function (e) {\n            e.preventDefault();\n            var testForSplit = QAV.getState("hasSplitFactor");\n            var language = QAV.getState("language");\n            var appendErrorText1 = resources[language].translation["selectedFactorsError"];\n\n            // pull the selected factors \n            var facNumberSelectedCheck = ROTA.setRotationFactorsFromCheckbox();\n            var length = facNumberSelectedCheck.length;\n            if (length !== 2) {\n                $("#genericErrorModal .errorPanel").empty();\n                $("#genericErrorModal .errorPanel").append("<p>" + appendErrorText1 + "</p><br>");\n                VIEW.showGenericErrorModal();\n                return;\n            }\n\n            if (testForSplit > 0) {\n                VIEW.showDisabledFunctionsAfterSplitModal();\n            } else {\n                var rotFacStateArray = QAV.getState("rotFacStateArray");\n                // todo - see if this can be deleted - already cloned with getState method?\n                var tempRotFacStateArray = _.cloneDeep(rotFacStateArray);\n                QAV.setState("tempRotFacStateArray", tempRotFacStateArray);\n\n                // pull the selected factors\' data\n                ROTA.setTwoFactorRotationalArray(rotFacStateArray);\n\n                // expects bare full array\n                var arrayWithCommunalities = ROTA.calculateCommunalities(rotFacStateArray);\n\n                // prep for D3 chart autoflagging tests\n                // var d3AutoflaggingPrep = d3Autoflagging(arrayWithCommunalities);\n\n                // gets array for fSig testing from LS of calculateCommunalities - sets fSigCriterionResults\n                ROTA.calculatefSigCriterionValues("flag");\n\n                // returns dataValuesArray for D3 chart\n                // creates arrays for table/D3 (LS) from state\n                var d3Prep = ROTA.doD3ChartDataPrep(arrayWithCommunalities);\n\n                $("#chartAndTableDisplayContainer").show();\n\n                ROTA.drawD3Chart(d3Prep);\n                // clone the state array to prevent changes\n                var chartData = _.cloneDeep(rotFacStateArray);\n                var prepTwoFactorTable = ROTA.prepTwoFactorUpdateHandsontable(chartData);\n\n                // set baseline data to calc "change due to factor rotation" (2 factor)\n                var baseLineData = _.cloneDeep(prepTwoFactorTable);\n                QAV.setState("baseLineData", baseLineData);\n\n                // creates 2 factor rotation display table data\n                var isNewSelection = true;\n                ROTA.updateDatatable1(prepTwoFactorTable, isNewSelection);\n\n                // reset degree display, button color and stored value\n                $("#handRotationDisplayContainer div").html("0&deg");\n                sessionStorage.setItem("rotationDegreeDisplayValue", 0);\n                var rotationDegreeDisplayValue = 0;\n                ROTA.saveRotationButtonColor(rotationDegreeDisplayValue);\n\n                //draw all factor rotation table for the first time\n                var isRotatedFactorsTableUpdate = "destroy";\n                LOAD.drawRotatedFactorsTable2(isRotatedFactorsTableUpdate, "noFlag"); // noFlag\n            }\n        });\n    })();\n\n\n    // clear DOM when user changes number factors kept for rotation\n    (function () {\n        $("#selectFactorsRotation").on("change", function () {\n\n            VIEW.clearSections_4_5_6();\n\n            $("#factorLoadingContainerDiv").hide();\n\n            // clear Project History except for first entry\n            $(\'#rotationHistoryList li:not(:first)\').remove();\n        });\n    })();\n\n    // get User input on number of factors to keep for rotation\n    (function () {\n        $("#sendToRotationButton").on("click", function () {\n            var language = QAV.getState("language");\n            var numFactors, data, loopLen, temp1, i, centroidFactors;\n\n            var appendErrorText1 = resources[language].translation["Rotate error 1"];\n            var appendErrorText2 = resources[language].translation["Rotate error 2"];\n\n\n            numFactors = parseInt($("#selectFactorsRotation option:selected").val());\n\n            QAV.setState("numFactorsRetained", numFactors);\n\n            // prvent user selection errors\n            temp1 = QAV.numFactorsExtracted || 0;\n            if (numFactors > temp1) {\n                $("#genericErrorModal .errorPanel").empty();\n                $("#genericErrorModal .errorPanel").append("<p>" + appendErrorText1 + "</p><br>");\n                VIEW.showGenericErrorModal();\n                return;\n                // $("#rotationLargeNumberError").show();\n            } else if (isNaN(numFactors)) {\n                $("#genericErrorModal .errorPanel").empty();\n                $("#genericErrorModal .errorPanel").append("<p>" + appendErrorText2 + "</p><br>");\n                VIEW.showGenericErrorModal();\n                return;\n                // $("#rotationNanError").removeClass("hidden");\n            } else {\n                //  $("#rotationLargeNumberError").hide();\n                // $("#rotationNanError").addClass("hidden");\n                $("#factorLoadingContainerDiv").show();\n                $("#factorVarimaxButton").show();\n                $("#factorJudgementRotButton").show();\n\n                var language = QAV.getState("language");\n                var facText = resources[language].translation["Factors Kept"];\n                var appendText = resources[language].translation["Factors Kept for Rotation"];\n\n                var button = $(this);\n                button.removeClass("blackHover");\n                button.addClass("buttonActionComplete");\n                button.prop(\'value\', (numFactors + \' \' + facText));\n                button.prop(\'disabled\', true);\n\n\n                // get the right data according to factor type\n                if (QAV.typeOfFactor === "PCA") {\n                    data = QAV.getState("eigenVecs");\n                    loopLen = data.length;\n\n                    // get just the factors selected from data\n                    for (i = 0; i < loopLen; i++) {\n                        data[i] = data[i].slice(0, numFactors);\n                    }\n                } else {\n                    data = QAV.getState("centroidFactors");\n                    loopLen = data.length;\n\n                    // get just the factors selected from data\n                    for (i = 0; i < loopLen; i++) {\n                        data[i] = data[i].slice(0, numFactors);\n                    }\n                }\n\n                // send data to state matrix and then to chart\n                QAV.setState("rotFacStateArray", data);\n\n                // prep for chart\n                ROTA.calculateCommunalities(data);\n\n                $("#rotationHistoryList").append(\'<li>\' + numFactors + appendText + \'</li>\');\n\n                // gets array for fSig testing from LS of calculateCommunalities - sets fSigCriterionResults\n                ROTA.calculatefSigCriterionValues("noFlag");\n\n                QAV.setState("tempRotFacStateArray", data);\n\n                //draw rotation table for the first time\n                var isRotatedFactorsTableUpdate = "no";\n                LOAD.drawRotatedFactorsTable2(isRotatedFactorsTableUpdate, "noFlag");\n\n                // archive rotation matrix state and factor rotation table\n                ROTA.saveRotationArchiveCounter("reset");\n                UTIL.archiveFactorScoreStateMatrixAndDatatable();\n\n                // format for use with varimax\n                centroidFactors = _.zip.apply(_, data);\n\n                // todo - convert to send to state matrix\n                QAV.setState("centroidFactors", centroidFactors);\n\n                $("#selectFactorsForOutputButton").show();\n            }\n        });\n    })();\n\n    // display rotation chart options in DOM\n    (function () {\n        $("#factorJudgementRotButton").on("click", function () {\n            var testForSplit = QAV.getState("hasSplitFactor");\n            if (testForSplit > 0) {\n                VIEW.showDisabledFunctionsAfterSplitModal();\n            } else {\n                QAV.setState("typeOfRotation", "judgemental");\n                var language = QAV.getState("language");\n                var judgeText = resources[language].translation["Judgemental rotation"];\n                var button = $(this);\n                button.removeClass("blackHover");\n                button.addClass("buttonActionComplete");\n                button.prop(\'value\', judgeText);\n                button.prop(\'disabled\', true);\n\n                // get number of checkboxes from UI and append to DOM\n                UTIL.addFactorSelectCheckboxesRotation(QAV.numFactorsRetained);\n                $("#judgementalRotationContainer").show();\n            }\n        });\n\n    })();\n\n    // call varimax\n    (function () {\n        $("#factorVarimaxButton").on("click", function () {\n            var testForSplit = QAV.getState("hasSplitFactor");\n            if (testForSplit > 0) {\n                VIEW.showDisabledFunctionsAfterSplitModal();\n            } else {\n                QAV.setState("typeOfRotation", "varimax");\n                var language = QAV.getState("language");\n                var varmaxRotButText = resources[language].translation["Varimax rotation applied"];\n                var button = $(this);\n                button.removeClass("blackHover");\n                button.addClass("buttonActionComplete");\n                button.prop(\'value\', varmaxRotButText);\n                button.prop(\'disabled\', true);\n\n                // avoid problem with reinitialization and display of 2 factor table\n                var tableCheck = $("#judgementalRotationContainer").is(":visible");\n                if (tableCheck) {\n                    ROTA.reInitializePlotAndChart();\n                }\n                VARIMAX.fireVarimaxRotation();\n            }\n        });\n    })();\n\n    (function () {\n        // scree plot image download\n        $(".screePlotDownloadButton").on("click", function () {\n            var date = UTIL.currentDate1();\n            var time = UTIL.currentTime1();\n            var dateTime = date + "_" + time;\n            var projectName = QAV.getState("qavProjectName");\n            var language = QAV.getState("language");\n            var screePlotTranslation = resources[language].translation["Scree Plot"];\n\n            var config = {\n                filename: projectName + "_" + screePlotTranslation + "_" + dateTime,\n            };\n            d3_save_svg.save(d3.select(\'#screePlotSVG\').node(), config);\n        });\n    })();\n\n    (function () {\n        // scree plot image download\n        $(".screePlotDownloadPngButton").on("click", function () {\n            console.log("clicked");\n            var date = UTIL.currentDate1();\n            var time = UTIL.currentTime1();\n            var dateTime = date + "_" + time;\n            var projectName = QAV.getState("qavProjectName");\n            var language = QAV.getState("language");\n            var screePlotTranslation = resources[language].translation["Scree Plot"];\n            var filename = projectName + "_" + screePlotTranslation + "_" + dateTime;\n            var svgString = UTIL.getSVGString(d3.select(\'#screePlotSVG\')\n                .node());\n            var svgCharacteristics = d3.select(\'#screePlotSVG\');\n            UTIL.downloadPngImages(svgString, svgCharacteristics, filename); // passes Blob and filesize \n        });\n    })();\n\n    (function () {\n        // download judgemental rotation chart\n        $(".rotationChartDownloadButton").on("click", function () {\n            var date = UTIL.currentDate1();\n            var time = UTIL.currentTime1();\n            var dateTime = date + "_" + time;\n            var projectName = QAV.getState("qavProjectName");\n            var language = QAV.getState("language");\n            var scatterPlotTranslation = resources[language].translation["Download Rotation Chart"];\n\n            var config = {\n                filename: projectName + "_" + scatterPlotTranslation + "_" + dateTime,\n            };\n            d3_save_svg.save(d3.select(\'#scatterChart\').node(), config);\n        });\n    })();\n\n    (function () {\n        // download judgemental rotation chart\n        $(".rotationChartDownloadPngButton").on("click", function () {\n            console.log("png rot chart clicked");\n            var date = UTIL.currentDate1();\n            var time = UTIL.currentTime1();\n            var dateTime = date + "_" + time;\n            var projectName = QAV.getState("qavProjectName");\n            var language = QAV.getState("language");\n            var scatterPlotTranslation = resources[language].translation["Download Rotation Chart"];\n            var filename = projectName + "_" + scatterPlotTranslation + "_" + dateTime;\n            var svgString = UTIL.getSVGString(d3.select(\'#scatterChart\')\n                .node());\n            var svgCharacteristics = d3.select(\'#scatterChart\');\n            UTIL.downloadPngImages(svgString, svgCharacteristics, filename); // passes Blob and filesize \n        });\n    })();\n\n\n\n    // set judgemental rotation chart options\n    (function () {\n        $(".rotationChartOptionsButton").on("mousedown", function (e) {\n            e.preventDefault();\n            VIEW.showRotationChartOptionsModal();\n        });\n    })();\n\n    (function () {\n        $("#rotationChartOptionsModal").on(\'change\', \'input[type=color]\', function () {\n            var rotChartConfig = QAV.getState("rotChartConfig") || {};\n            var hexCode2 = $(this).val();\n            rotChartConfig[$(this).attr(\'name\')] = hexCode2;\n            QAV.setState("rotChartConfig", rotChartConfig);\n        });\n    })();\n\n    // control rotation chart options\n    (function () {\n        $("#rotationChartOptionsModal").on(\'click\', \'.applyChanges\', function () {\n            var rotChartConfig = QAV.getState("rotChartConfig") || {};\n            rotChartConfig.significanceColorA = rotChartConfig.significanceColorAPrep;\n            rotChartConfig.significanceColorB = rotChartConfig.significanceColorBPrep;\n            QAV.setState("rotChartConfig", rotChartConfig);\n\n            $("#twoFactorDisplayTableDiv").remove();\n\n            $("#chartAndTableContainerDiv").append($(\'<div/>\').attr("id", "twoFactorDisplayTableDiv"));\n            $("#twoFactorDisplayTableDiv").append($(\'<table/>\').attr("id", "twoFactorDisplayTable").addClass("display compact nowrap cell-border").attr("width", "100%"));\n\n            $("#generateRotationItemsButton").click();\n\n            $("#rotationChartOptionsModal").iziModal(\'close\');\n        });\n    })();\n\n    // close modal box\n    (function () {\n        $("#rotationChartOptionsModal").on(\'click\', \'.button-cancel\', function () {\n            $("#rotationChartOptionsModal").iziModal(\'close\');\n        });\n    })();\n\n    // remove circle highlighting? - event handler\n    (function () {\n        $("#rotationChartOptionsModal").on(\'click\', \'#removeCircleHighlightDiv :radio\', function () {\n            var rotChartConfig = QAV.getState("rotChartConfig") || {};\n            $(\'#rotationChartOptionsModal, #removeCircleHighlightDiv .radioHighlight2\').removeClass("selected");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                $(this).parent().addClass("selected");\n                $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n                rotChartConfig.removeCircleHighlight = true;\n            } else if ($radioOption === "No") {\n                rotChartConfig.removeCircleHighlight = false;\n            }\n            QAV.setState("rotChartConfig", rotChartConfig);\n        });\n    })();\n\n    // remove circles? - event handler\n    (function () {\n        $("#rotationChartOptionsModal").on(\'click\', \'#removeCirclesDiv :radio\', function () {\n            var rotChartConfig = QAV.getState("rotChartConfig") || {};\n            $(\'#rotationChartOptionsModal, #removeCirclesDiv .radioHighlight2\').removeClass("selected");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                $(this).parent().addClass("selected");\n                $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n                rotChartConfig.removeCircles = true;\n            } else if ($radioOption === "No") {\n                rotChartConfig.removeCircles = false;\n            }\n            QAV.setState("rotChartConfig", rotChartConfig);\n        });\n    })();\n\n    // use id number or respondent name? - event handler\n    (function () {\n        $("#rotationChartOptionsModal").on(\'click\', \'#chartIdentifierDiv :radio\', function () {\n            var rotChartConfig = QAV.getState("rotChartConfig") || {};\n            $(\'#rotationChartOptionsModal, #chartIdentifierDiv .radioHighlight2\').removeClass("selected");\n            var $radioOption = ($(this).val());\n            $(this).parent().addClass("selected");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n            if ($radioOption === "Yes") {\n                rotChartConfig.identifierNumber = true;\n            } else if ($radioOption === "No") {\n                rotChartConfig.identifierNumber = false;\n            }\n            QAV.setState("rotChartConfig", rotChartConfig);\n        });\n    })();\n\n    // change font size? - event handler\n    (function () {\n        $("#rotationChartOptionsModal").on(\'click\', \'#changeFontSizeDiv :radio\', function () {\n            var rotChartConfig = QAV.getState("rotChartConfig") || {};\n            $(\'#changeFontSizeDiv :radio, #changeFontSizeDiv .radioHighlight2\').removeClass("selected");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                $(this).parent().addClass("selected");\n                $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n                rotChartConfig.changeFontSize = true;\n            } else if ($radioOption === "No") {\n                rotChartConfig.changeFontSize = false;\n            }\n            QAV.setState("rotChartConfig", rotChartConfig);\n        });\n    })();\n\n    // chart font size adjustment input box\n    (function () {\n        $("#rotationChartOptionsModal").on(\'input\', \'#chartFontSizeInputBox\', function () {\n            var rotChartConfig = QAV.getState("rotChartConfig") || {};\n            var customFontSize = $(\'#chartFontSizeInputBox\').val();\n            rotChartConfig.customFontSize = customFontSize;\n            QAV.setState("rotChartConfig", rotChartConfig);\n        });\n    })();\n\n    /*\n    //\n    // **** SECTION 5 ****  (factor loadings)\n    //\n    */\n    (function () {\n        $("#autoflagButton").on("click", function (e) {\n            e.preventDefault();\n            var testForSplit = QAV.getState("hasSplitFactor");\n            if (testForSplit > 0) {\n                VIEW.showDisabledFunctionsAfterSplitModal();\n            } else {\n                // get copy of current rotations state matrix\n                var rotFacStateArray = QAV.getState("rotFacStateArray");\n                // prep for chart\n                ROTA.calculateCommunalities(rotFacStateArray);\n                /* gets array for fSig testing from LS of calculateCommunalities - sets fSigCriterionResults  --- also "flag" parameter causes display of sig factor loadings in current facor loadings table  */\n                ROTA.calculatefSigCriterionValues("flag");\n                // re-draw rotation table without destroy\n                var isRotatedFactorsTableUpdate = "destroy";\n                LOAD.drawRotatedFactorsTable2(isRotatedFactorsTableUpdate, "flag");\n            }\n        });\n    })();\n\n\n    // SPLIT BIPOLAR FACTOR BUTTON\n    (function () {\n        $("#splitFactorButton").on("click", function (e) {\n            e.preventDefault();\n            VIEW.showSplitBipolarFactorModal();\n        });\n    })();\n\n    // click handler for select factor loadings checkboxes\n    // todo - check to see if this is needed\n    (function () {\n        $(\'#factorRotationTable2 tbody\').on(\'click\', \'tr\', function () {\n            var table = $(\'#factorRotationTable2\').DataTable(); //\n            table\n                .rows()\n                .data();\n        });\n    })();\n\n    // control factor loadings table background highlight\n    (function () {\n        $("#loadingsRadioSelect2 :radio").on(\'click\', function () {\n\n            // disable if table has split factor\n            var testForSplit = QAV.getState("hasSplitFactor");\n            if (testForSplit > 0) {\n                VIEW.showDisabledFunctionsAfterSplitModal();\n            } else {\n                $("#loadingsRadioSelect2 .radioHighlight2").removeClass("selected");\n                // $(this).parent().addClass("selected");\n                $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n                // todo - find out how to prevent need for table destroy\n\n                // keep flags - get current table data including flags and redrawn\n                var table = $(\'#factorRotationTable2\').DataTable();\n                var chartData = table.rows().data();\n                QAV.colorButtonChartData = chartData;\n\n                var isRotatedFactorsTableUpdate = "highlighter";\n                var shouldFlag = "flag";\n                LOAD.drawRotatedFactorsTable2(isRotatedFactorsTableUpdate, shouldFlag);\n            }\n        });\n    })();\n\n    // reorder table by respondent id or highest loading factor\n    (function () {\n        $("#loadingsRadioSelect1 :radio").on(\'click\', function () {\n            // $(\'#loadingsRadioSelect1 input:not(:checked)\').parent().removeClass("selected");\n            $(\'#loadingsRadioSelect1 .radioHighlight1\').removeClass("selected");\n            // $(this).parent().addClass("selected");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n            var $radioOption = +($(this).val());\n            var table = $(\'#factorRotationTable2\').DataTable();\n\n            if ($radioOption === 0) {\n                table.order([0, \'asc\']).draw();\n            } else if ($radioOption === 2) {\n                table.order([2, \'asc\']).draw();\n            }\n        });\n    })();\n\n    // remove items from Project history list and undo rotation\n    (function () {\n        $("#rotationHistoryList").on("click", "button", function (e) {\n            e.preventDefault();\n            var $this = $(this);\n            if ($this.hasClass("deleteButton") && $this.hasClass("varimaxCalled")) {\n                $("#factorVarimaxButton").removeClass("buttonActionComplete").addClass("blackHover").prop(\'value\', \'Apply Varimax Rotation\').prop(\'disabled\', false);\n                LOAD.undoFactorRotation();\n                $this.parent().remove();\n            } else if ($this.hasClass("deleteSplitFactorButton")) {\n                LOAD.undoSplitFactorRotation();\n                $this.parent().remove();\n            } else if ($this.hasClass("deleteButton")) {\n                LOAD.undoFactorRotation();\n                $this.parent().remove();\n            }\n        });\n    })();\n\n    // INVERT FACTOR BUTTON\n    (function () {\n        $("#invertFactorButton").on("click", function (e) {\n            e.preventDefault();\n            var rotationHistory = $("#rotationHistoryList li").text();\n            if (rotationHistory.indexOf(\'was split into\') >= 0) {\n                VIEW.showDisabledFunctionsAfterSplitModal();\n            } else {\n                VIEW.showInvertModal();\n            }\n        });\n    })();\n\n    /*\n    //\n    // **** SECTION 6 **** output\n    //\n    */\n\n    // page setup actions for page reload\n    (function () {\n        // hide download button until after preliminary results are displayed\n        $("#downloadResultsButton").hide();\n        $("#downloadCsvResultsButton").hide();\n        $("#displayQuickResultsButton").hide();\n        $("#factorVizOptionsDiv").hide();\n\n        // tracker for results download / display buttons\n        QAV.setState("outputComplete", "false");\n    })();\n\n    //  change the value of checkboxes on factor rotation table when clicked\n    (function () {\n        $(\'#factorRotationTable2\').on(\'click\', \'td\', function () {\n            var myTable = $(\'#factorRotationTable2\').DataTable();\n            if (myTable.cell($(this)).data() === \'false\') {\n                myTable.cell($(this)).data(\'true\');\n            } else if (myTable.cell($(this)).data() === \'true\') {\n                myTable.cell($(this)).data(\'false\');\n            }\n        });\n    })();\n\n    // display quick results button event listener\n    (function () {\n        $(\'#displayQuickResultsButton\').on(\'click\', function () {\n            // pull the state data (selected factor loadings - checkboxes) from table\n            var results = [];\n            var loopLen1 = QAV.getState("qavRespondentNames").length;\n            var data = $(\'#factorRotationTable2\').DataTable();\n            for (var i = 0; i < loopLen1; i++) {\n                var data2 = data.row(i).data();\n                results.push(data2);\n            }\n            QAV.setState("results", results);\n\n            // get selected factors information\n            PRELIMOUT.getFactorsForAnalysis();\n\n            // begins preliminary results display function cascade\n            var canOutput = PRELIMOUT.pullFlaggedFactorLoadings();\n\n            if (canOutput !== "false") {\n                OUTPUT.generateOutput();\n                VIEW.clearPreviousTables();\n                // CORR.drawRawSortsRadviz();\n                PRELIMOUT.showPreliminaryOutput1();\n                $("#downloadResultsButton").show();\n                $("#downloadCsvResultsButton").show();\n                $("#clearStorageButton").show();\n            }\n        });\n    })();\n\n    // start the output calculations and file write functions cascade\n    (function () {\n        $("#downloadResultsButton").on("click", function () {\n            // OUTPUT.downloadOutput();\n            OUTPUT.downloadExcelOutputFile();\n        });\n    })();\n\n    (function () {\n        $("#downloadCsvResultsButton").on("click", function () {\n            // OUTPUT.downloadOutput();\n            OUTPUT.downloadCsvOutputFile();\n        });\n    })();\n\n    (function () {\n        $("#selectFactorsForOutputButton").on("click", function () {\n            PRELIMOUT.appendFactorSelectionCheckboxes();\n            $("#displayQuickResultsButton").show();\n            $("#factorVizOptionsDiv").show();\n        });\n    })();\n\n    (function () {\n        $("#clearStorageButton").on("click", function () {\n            VIEW.showDeleteKenqData();\n        });\n    })();\n\n    (function () {\n        $(\'#deleteLocalDataModal\').on("click", \'#deleteLocalDataConfirmButton\', function () {\n            localStorage.clear();\n            sessionStorage.clear();\n            VIEW.showlocalDataDeleteSuccessModal();\n        });\n    })();\n\n\n    (function () {\n        $(\'#deleteLocalDataModal\').on("click", \'.button-cancel\', function () {\n            $(\'#deleteLocalDataModal\').iziModal(\'close\');\n        });\n    })();\n    /*\n     **\n     **    Visualizations Panel event listeners\n     **\n     */\n    // should include legend? - event handler\n    (function () {\n        $("#includeLegendDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#includeLegendDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldHaveLegend = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldHaveLegend = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should prepend statement numbers? - event handler\n    (function () {\n        $("#prependStateNoDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#prependStateNoDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldPrependStateNo = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldPrependStateNo = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should show only statement numbers? - event handler\n    (function () {\n        $("#showOnlyStateNoDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#showOnlyStateNoDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldShowOnlyStateNo = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldShowOnlyStateNo = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should show custom factor names? - event handler\n    (function () {\n        $("#addCustomFactorNameDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#addCustomFactorNameDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.addCustomFactorName = true;\n            } else if ($radioOption === "No") {\n                vizConfig.addCustomFactorName = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // grab custom factor names from input\n    (function () {\n        $(\'#customFactorNameInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var customFactorNames = $(\'#customFactorNameInputBox\').val();\n            vizConfig.customFactorNames = customFactorNames.split(",");\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should set Card Height? - event handler\n    (function () {\n        $("#setCardHeightDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setCardHeightDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldSetCardHeight = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldSetCardHeight = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should set card width? - event handler\n    (function () {\n        $("#setCardWidthDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setCardWidthDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldSetCardWidth = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldSetCardWidth = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should set font size? - event handler\n    (function () {\n        $("#setFontSizeDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setFontSizeDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldSetFontSize = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldSetFontSize = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should set font size? - event handler\n    (function () {\n        $("#setStatementWidthDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setStatementWidthDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldSetStatementWidth = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldSetStatementWidth = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should set line spacing? - event handler\n    (function () {\n        $("#adjustLineSpacingDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#adjustLineSpacingDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldSetLineSpacing = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldSetLineSpacing = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should trim statements? - event handler  trimStatementsDiv\n    (function () {\n        $("#trimStatementsDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#trimStatementsDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldTrimStatements = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldTrimStatements = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // Asian Language set width? - event handler  trimStatementsDiv\n    (function () {\n        $("#setAsianStatementsLengthDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setAsianStatementsLengthDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldSetWidthForAsian = true;\n                vizConfig.asianStatmentLength = 12;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldSetWidthForAsian = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // indicate significance? - event handler\n    (function () {\n        $("#showSignificanceSymbolsDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#showSignificanceSymbolsDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldIndicateDistinguishing = true;\n                $(\'#useUnicodeYes\').trigger("click");\n                vizConfig.shouldUseUnicode = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldIndicateDistinguishing = false;\n                $(\'#useUnicodeSymbolsDiv .radioHighlight2\').removeClass("selected");\n                $(\'#zscoreArrowDirectionDiv .radioHighlight2\').removeClass("active");\n                $(\'#setSymbolFontSizeDiv .radioHighlight2\').removeClass("active");\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should use Unicode symbols? - event handler  #useUnicodeSymbolsDiv\n    (function () {\n        $("#useUnicodeSymbolsDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#useUnicodeSymbolsDiv .radioHighlight2\').removeClass("selected");\n            $(this).parent().addClass("selected");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "unicode") {\n                vizConfig.shouldUseUnicode = true;\n            } else if ($radioOption === "ascii") {\n                vizConfig.shouldUseUnicode = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should use Unicode symbols? - event handler  #useUnicodeSymbolsDiv\n    (function () {\n        $("#setSymbolFontSizeDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setSymbolFontSizeDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldSetSymbolFontSize = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldSetSymbolFontSize = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should show zscore factor comparison arrows? - event handler\n    (function () {\n        $("#zscoreArrowDirectionDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#zscoreArrowDirectionDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldShowZscoreArrows = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldShowZscoreArrows = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should show zscore factor comparison arrows? - event handler\n    (function () {\n        $("#displayConsensusStatementsDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#displayConsensusStatementsDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldIndicateConsensus = true;\n                $(\'#setConsensusSymbolNo\').trigger("click");\n                vizConfig.shouldUseToIndicateConsensus = "stripe";\n            } else if ($radioOption === "No") {\n                vizConfig.shouldIndicateConsensus = false;\n                $(\'#setConsensusSymbolDiv .radioHighlight2\').removeClass("selected");\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should color vs stripe for consensus? - event handler\n    (function () {\n        $("#setConsensusSymbolDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setConsensusSymbolDiv .radioHighlight2\').removeClass("selected");\n            $(this).parent().addClass("selected");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "COLOR") {\n                vizConfig.shouldUseToIndicateConsensus = "color";\n            } else if ($radioOption === "STRIPE") {\n                vizConfig.shouldUseToIndicateConsensus = "stripe";\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should show matching counts? - event handler\n    (function () {\n        $("#useMatchCountDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#useMatchCountDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldShowMatchCounts = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldShowMatchCounts = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should show background color? - event handler\n    (function () {\n        $("#indicateMatchCountAsBackgroundDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#indicateMatchCountAsBackgroundDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldShowBackgroundColor = true;\n                $(\'#setMatchCountCautionIndicatorNo\').trigger("click");\n                vizConfig.shouldUseToIndicateMatchCaution = "stripe";\n                $(\'#setMatchConsensusOverlapIndicatorNo\').trigger("click");\n                vizConfig.shouldUseToIndicateOverlap = "crosshatch";\n            } else if ($radioOption === "No") {\n                vizConfig.shouldShowBackgroundColor = false;\n                $(\'#setMatchCountCautionIndicatorDiv .radioHighlight2\').removeClass("selected");\n                $(\'#setMatchConsensusOverlapIndicatorDiv .radioHighlight2\').removeClass("selected");\n            }\n            vizConfig.backgroundColorCutoff = 0;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should color vs stripe for consensus? - event handler\n    (function () {\n        $("#setMatchCountCautionIndicatorDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setMatchCountCautionIndicatorDiv .radioHighlight2\').removeClass("selected");\n            $(this).parent().addClass("selected");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "COLOR") {\n                vizConfig.shouldUseToIndicateMatchCaution = "color";\n            } else if ($radioOption === "STRIPE") {\n                vizConfig.shouldUseToIndicateMatchCaution = "stripe";\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should color vs stripe for consensus? - event handler\n    (function () {\n        $("#setMatchConsensusOverlapIndicatorDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#setMatchConsensusOverlapIndicatorDiv .radioHighlight2\').removeClass("selected");\n            $(this).parent().addClass("selected");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "COLOR") {\n                vizConfig.shouldUseToIndicateOverlap = "color";\n            } else if ($radioOption === "CROSSHATCH") {\n                vizConfig.shouldUseToIndicateOverlap = "crosshatch";\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    // should add custom name? - event handler\n    (function () {\n        $("#addCustomNameDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#addCustomNameDiv .radioHighlight2\').removeClass("active");\n            $(this).parent().addClass("active");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("active");\n            var $radioOption = ($(this).val());\n            if ($radioOption === "Yes") {\n                vizConfig.shouldAddCustomName = true;\n            } else if ($radioOption === "No") {\n                vizConfig.shouldAddCustomName = false;\n            }\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $("#customNameLocationDiv :radio").on(\'click\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            $(\'#customNameLocationDiv .radioHighlight2\').removeClass("selected");\n            $(this).parent().addClass("selected");\n            $("label[for=\'" + $(this).attr(\'id\') + "\']").addClass("selected");\n            var $radioOption = ($(this).val());\n            vizConfig.customNameLocation = $radioOption;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $("#showDisplayPanelButton").on(\'click\', function () {\n            var language = QAV.getState("language");\n            var hide = resources[language].translation.HIDE;\n            var view = resources[language].translation.VIEW;\n            $(this).val(function (i, value) {\n                return value === hide ? view : hide;\n            });\n            $("#vizPanelHideContainer").toggle();\n        });\n    })();\n\n\n    (function () {\n        $("#updateDisplayButton").on(\'click\', function () {\n            VIEW.clearPreviousTables();\n            PRELIMOUT.showPreliminaryOutput1();\n        });\n    })();\n    //\n    // Visualization Control Panel On-change event listeners\n    //\n\n    // capture card height input in Viz panel   #cardHeightInputBox\n    (function () {\n        $(\'#cardHeightInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var cardHeight = $(\'#cardHeightInputBox\').val();\n            UTIL.checkIfValueIsNumber(cardHeight, "cardHeightInputBox");\n            if (cardHeight > 500) {\n                cardHeight = 500;\n            } else if (cardHeight < 5) {\n                cardHeight = 5;\n            }\n            vizConfig.cardHeight = cardHeight;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#cardWidthInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var cardWidth = $(\'#cardWidthInputBox\').val();\n            UTIL.checkIfValueIsNumber(cardWidth, "cardWidthInputBox");\n            if (cardWidth > 500) {\n                cardWidth = 500;\n            } else if (cardWidth < 5) {\n                cardWidth = 5;\n            }\n            vizConfig.cardWidth = cardWidth;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#fontSizeInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var fontSize = $(\'#fontSizeInputBox\').val();\n            UTIL.checkIfValueIsNumber(fontSize, "fontSizeInputBox");\n            if (fontSize > 180) {\n                fontSize = 180;\n            } else if (fontSize < 4) {\n                fontSize = 4;\n            }\n            vizConfig.fontSize = fontSize;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#statementWidthInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var statementWidth = $(\'#statementWidthInputBox\').val();\n            UTIL.checkIfValueIsNumber(statementWidth, "statementWidthInputBox");\n            if (statementWidth > 180) {\n                statementWidth = 180;\n            } else if (statementWidth < -180) {\n                statementWidth = -180;\n            }\n            vizConfig.statementWidth = statementWidth;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#lineSpacingInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var lineSpacing = $(\'#lineSpacingInputBox\').val();\n            UTIL.checkIfValueIsNumber(lineSpacing, "lineSpacingInputBox");\n            if (lineSpacing > 500) {\n                lineSpacing = 500;\n            } else if (lineSpacing < 4) {\n                lineSpacing = 4;\n            }\n            vizConfig.lineSpacing = lineSpacing;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#trimStatementsInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var trimStatementSize = $(\'#trimStatementsInputBox\').val();\n            UTIL.checkIfValueIsNumber(trimStatementSize, "trimStatementsInputBox");\n            if (trimStatementSize > 3000) {\n                trimStatementSize = 3000;\n            } else if (trimStatementSize < 1) {\n                trimStatementSize = 1;\n            }\n            vizConfig.trimStatementSize = trimStatementSize;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#setAsianLengthInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var asianStatmentLength = $(\'#setAsianLengthInputBox\').val();\n            UTIL.checkIfValueIsNumber(asianStatmentLength, "setAsianLengthInputBox");\n            if (asianStatmentLength > 300) {\n                asianStatmentLength = 300;\n            } else if (asianStatmentLength < 2) {\n                asianStatmentLength = 2;\n            }\n            vizConfig.asianStatmentLength = asianStatmentLength;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#symbolFontSizeInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var sigSymbolFontSize = $(\'#symbolFontSizeInputBox\').val();\n            UTIL.checkIfValueIsNumber(sigSymbolFontSize, "symbolFontSizeInputBox");\n            if (sigSymbolFontSize > 80) {\n                sigSymbolFontSize = 80;\n            } else if (sigSymbolFontSize < 2) {\n                sigSymbolFontSize = 2;\n            }\n            vizConfig.sigSymbolFontSize = sigSymbolFontSize;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $("#vizPanelHideContainer").on(\'change\', \'input[type=color]\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var hexCode2 = $(this).val();\n            vizConfig[$(this).attr(\'name\')] = hexCode2;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#backgroundColorCutoffInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var backgroundColorCutoff = $(\'#backgroundColorCutoffInputBox\').val();\n            UTIL.checkIfValueIsNumber(backgroundColorCutoff, "backgroundColorCutoffInputBox");\n            if (backgroundColorCutoff >= 100) {\n                backgroundColorCutoff = 99;\n            }\n            vizConfig.backgroundColorCutoff = backgroundColorCutoff;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n    (function () {\n        $(\'#customNameInputBox\').on(\'input\', function () {\n            var vizConfig = QAV.getState("vizConfig") || {};\n            var customName = $(\'#customNameInputBox\').val();\n            console.log(customName);\n            vizConfig.customName = customName;\n            QAV.setState("vizConfig", vizConfig);\n        });\n    })();\n\n\n}(window.CONTROLERS = window.CONTROLERS || {}, QAV));//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9DT05UUk9MRVJTLmpzP2Q3ZjIiXSwic291cmNlc0NvbnRlbnQiOlsiLy9LZW4tUSBBbmFseXNpc1xuLy9Db3B5cmlnaHQgKEMpIDIwMTYgU2hhd24gQmFuYXNpY2tcbi8vXG4vLyAgICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuLy8gICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbi8vICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4vLyAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG5cbi8vIEpTbGludCBkZWNsYXJhdGlvbnNcbi8qIGdsb2JhbCB3aW5kb3csICQsIHJlc291cmNlcywgRVhDRUwsIEZJUkVCQVNFLCBERU1PLCBkMywgSU5QVVQsIFJPVEEsIFZBUklNQVgsIE9VVFBVVCwgTE9BRCwgbG9jYWxTdG9yYWdlLCBfLCBkM19zYXZlX3N2ZywgZG9jdW1lbnQsIEh1ZWJlZSwgUEFTVEUsIENPUlIsIHNlc3Npb25TdG9yYWdlLCBDRU5UUk9JRCwgVklFVywgUENBLCBRQVYsIFVUSUwsIHBlcmZvcm1hbmNlKi9cblxuKGZ1bmN0aW9uIChDT05UUk9MRVJTLCBRQVYsIHVuZGVmaW5lZCkge1xuXG4gICAgLypcbiAgICAvL1xuICAgIC8vICoqKiogU0VDVElPTiAxICoqKiogZGF0YSBpbnB1dFxuICAgIC8vXG4gICAgKi9cblxuICAgIC8vICoqKioqIFBlcnNpc3QgUGFzdGVkIFNvcnQgRGF0YSBpbiBQUU1ldGhvZCBpbnB1dCBzZWN0aW9uICoqKioqKioqKioqKioqKioqXG4gICAgLy8gdG9kbyAtIG1vdmUgdGhpcyB0byBtYW51YWwgaW5wdXQgZmlsZT9cblxuICAgIC8vIFVzZSBEZW1vIERhdGEgU2V0IE9wdGlvbiAtIGRpc3BsYXkgZGF0YWJhc2Ugc2VsZWN0ZWRcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2V4aXN0aW5nRGF0YWJhc2VTZWxlY3RcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ZXN0VmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgaWYgKHRlc3RWYWx1ZSA9PT0gXCJMaXBzZXRcIikge1xuICAgICAgICAgICAgICAgIERFTU8ucmV0dXJuTGlwc2V0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRlc3RWYWx1ZSA9PT0gXCJNZWRpdW1cIikge1xuICAgICAgICAgICAgICAgIERFTU8ucmV0dXJuTWVkaXVtKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRlc3RWYWx1ZSA9PT0gXCJMYXJnZVwiKSB7XG4gICAgICAgICAgICAgICAgREVNTy5yZXR1cm5RdW90ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuXG4gICAgLy8gY2FsbCBjaGVjayBtYW51YWwgaW5wdXQgc29ydCBzeW1tZXRyeVxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc29ydElucHV0U3VibWl0XCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBJTlBVVC5pc1NvcnRTeW1tZXRyaWMoKTtcbiAgICAgICAgICAgICQoJyNyZXNwb25kZW50TmFtZUlucHV0MScpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29ydElucHV0Qm94Jyk7XG5cbiAgICAgICAgLy8gcHVsbCB1c2VyIGlucHV0IGZyb20gbWVtb3J5IGlmIGl0IGV4aXN0c1xuICAgICAgICB2YXIgdGVtcDEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNvcnRJbnB1dEJveFwiKTtcbiAgICAgICAgaWYgKHRlbXAxKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHRlbXAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2FwdHVyZSBzb3J0cyBmcm9tIHVzZXItaW5wdXQgYW5kIHNldCBpbnRvIG1lbW9yeVxuICAgICAgICAkKCcjc29ydElucHV0Qm94Jykub24oJ2lucHV0IHByb3BlcnR5Y2hhbmdlIGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic29ydElucHV0Qm94XCIsIHRoaXMudmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI3N0YWdlRGF0YVBxbWV0aG9kJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgUEFTVEUuc3RhZ2VEYXRhUHFtZXRob2QoKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHRvIGNsZWFyIHNvIG5ldyBkYXRhIGNhbiBiZSBhZGRlZFxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjY2xlYXJJbnB1dEJveERhdGFCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiI3NvcnRJbnB1dEJveFwiKS52YWwoXCJcIik7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNvcnRJbnB1dEJveFwiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInNvcnRJbnB1dEJveFwiLCBcIlwiKTtcbiAgICAgICAgICAgICQoXCIjc3RhdGVtZW50c0lucHV0Qm94UHFtZXRob2RcIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJxYXZTdGF0ZW1lbnRzSW5wdXRCb3hQcW1ldGhvZFwiLCBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGltcG9ydCBFWENFTCBmaWxlc1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjZmlsZVNlbGVjdFwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidHlwZU9mRXhjZWxGaWxlXCIsIFwidXNlci1pbnB1dFwiKTtcbiAgICAgICAgICAgIEVYQ0VMLmZpbGVQaWNrZWQoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cblxuICAgIC8vIGltcG9ydCBVbmZvcmNlZCBFWENFTCBmaWxlc1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjZmlsZVNlbGVjdFVuZm9yY2VkXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ0eXBlT2ZFeGNlbEZpbGVcIiwgXCJ1bmZvcmNlZFwiKTtcbiAgICAgICAgICAgIEVYQ0VMLmZpbGVQaWNrZWQoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyBpbXBvcnQgS2VuLVEgb3V0cHV0IGZpbGVzIHRvIEVYQ0VMXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNmaWxlU2VsZWN0S2VucVwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgRVhDRUwuZmlsZVBpY2tlZEtlbnEoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyBpbXBvcnQgREFUIGZpbGVzIHRvIFBBU1RFXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNmaWxlU2VsZWN0UFFNXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBQQVNURS5maWxlUGlja2VkVGV4dFBRTShlKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGltcG9ydCBTVEEgZmlsZXMgdG8gUEFTVEVcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2ZpbGVTZWxlY3RTVEFcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIFBBU1RFLmZpbGVQaWNrZWRUZXh0U1RBKGUpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gaW1wb3J0IFNUQSBmaWxlcyB0byBQQVNURSAgICAgZGlzcGxheUpzb25EYXRhXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNmaWxlU2VsZWN0SlNPTlwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgRklSRUJBU0UuZmlsZVBpY2tlZEpTT04oZSk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3N0YWdlSnNvbkRhdGFcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgRklSRUJBU0Uuc3RhZ2VKc29uRGF0YShlKTtcbiAgICAgICAgICAgICQoXCIuanNvbkRvd25sb2FkUFFcIikuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNkb3dubG9hZEpzb25EYXRhXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIEZJUkVCQVNFLmRvd25sb2FkSnNvbkRhdGEoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2V4aXN0aW5nRGF0YWJhc2VSZXNwb25kZW50TGlzdFwiKS5vbihcImNsaWNrXCIsIFwiYnV0dG9uXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLnBhcmVudCgpLmluZGV4KCk7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyIHJlc3BvbmRlbnROYW1lcyA9IFFBVi5nZXRTdGF0ZShcInFhdlJlc3BvbmRlbnROYW1lc1wiKTtcbiAgICAgICAgICAgIHZhciBzb3J0cyA9IFFBVi5nZXRTdGF0ZShcInFhdlJlc3BvbmRlbnRTb3J0c0Zyb21EYlN0b3JlZFwiKTtcbiAgICAgICAgICAgIHJlc3BvbmRlbnROYW1lcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgc29ydHMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgICAgICAgaWYgKCQuZm4uRGF0YVRhYmxlLmlzRGF0YVRhYmxlKCcjY29ycmVsYXRpb25UYWJsZTInKSkge1xuICAgICAgICAgICAgICAgICQoJyNjb3JyZWxhdGlvblRhYmxlMicpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAkKCcjY29ycmVsYXRpb25UYWJsZTInKS5odG1sKFwiXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJxYXZSZXNwb25kZW50TmFtZXNcIiwgcmVzcG9uZGVudE5hbWVzKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInFhdlJlc3BvbmRlbnRTb3J0c0Zyb21EYlN0b3JlZFwiLCBzb3J0cyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2V4cG9ydEpzb25Tb3J0c1BRTVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBFWENFTC5leHBvcnRFeGNlbFNvcnRzUFFNKCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2V4cG9ydFN0YXRlbWVudHNQUU1cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgRVhDRUwuZXhwb3J0U3RhdGVtZW50c1RvUHFtZXRob2QoKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNjbGVhckFuYWx5c2lzRGF0YUJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKFwiI2V4aXN0aW5nRGF0YWJhc2VTdGF0ZW1lbnRMaXN0XCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAkKFwiI2V4aXN0aW5nRGF0YWJhc2VSZXNwb25kZW50TGlzdFwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgaWYgKCQuZm4uRGF0YVRhYmxlLmlzRGF0YVRhYmxlKCcjY29ycmVsYXRpb25UYWJsZTInKSkge1xuICAgICAgICAgICAgICAgICQoJyNjb3JyZWxhdGlvblRhYmxlMicpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAkKCcjY29ycmVsYXRpb25UYWJsZTInKS5odG1sKFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJChcIi5wcW1CdXR0b25cIikuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNkaXNhYmxlU3ltbWV0cnlCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICB2YXIgbm9TeW1tQnV0VGV4dCA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJTeW1tZXRyeSBDaGVjayBEaXNhYmxlZFwiXTtcbiAgICAgICAgICAgIHZhciBzeW1tQnV0VGV4dCA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJEaXNhYmxlIFN5bW1ldHJ5IENoZWNrXCJdO1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoYnV0dG9uLmhhc0NsYXNzKFwiYnV0dG9uQWN0aW9uQ29tcGxldGVcIikpIHtcbiAgICAgICAgICAgICAgICBidXR0b24ucHJvcCgndmFsdWUnLCBzeW1tQnV0VGV4dCk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKFwiYmxhY2tIb3ZlclwiKTtcbiAgICAgICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoXCJidXR0b25BY3Rpb25Db21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJkb1N5bW1ldHJ5Q2hlY2tcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24ucHJvcCgndmFsdWUnLCBub1N5bW1CdXRUZXh0KTtcbiAgICAgICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoXCJibGFja0hvdmVyXCIpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRDbGFzcyhcImJ1dHRvbkFjdGlvbkNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImRvU3ltbWV0cnlDaGVja1wiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNkaXNhYmxlRXJyb3JTb3VuZEJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBRQVYuZ2V0U3RhdGUoXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgICAgIHZhciBub0Vycm9yQnV0VGV4dCA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJBVURJTyBFUlJPUiBXQVJOSU5HIERJU0FCTEVEXCJdO1xuICAgICAgICAgICAgdmFyIGVycm9yQnV0VGV4dCA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJEaXNhYmxlIEF1ZGlvIEVycm9yIFdhcm5pbmdcIl07XG4gICAgICAgICAgICB2YXIgYnV0dG9uID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmIChidXR0b24uaGFzQ2xhc3MoXCJidXR0b25BY3Rpb25Db21wbGV0ZVwiKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5wcm9wKCd2YWx1ZScsIGVycm9yQnV0VGV4dCk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKFwiYmxhY2tIb3ZlclwiKTtcbiAgICAgICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoXCJidXR0b25BY3Rpb25Db21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJkb0Vycm9yU291bmRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24ucHJvcCgndmFsdWUnLCBub0Vycm9yQnV0VGV4dCk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUNsYXNzKFwiYmxhY2tIb3ZlclwiKTtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoXCJidXR0b25BY3Rpb25Db21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJkb0Vycm9yU291bmRcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8qXG4gICAgLy9cbiAgICAvLyAqKioqIFNFQ1RJT04gMiAqKioqIGNvcnJlbGF0aW9uc1xuICAgIC8vXG4gICAgKi9cblxuXG4gICAgLy8gc3RhcnQgY29ycmVsYXRpb24gYW5heXNpcyBmcm9tIGRlbW8gZGF0YVxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjYmVnaW5BbmFseXNpc0xvY2FsRGF0YVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIENPUlIuY3JlYXRlQ29ycmVsYXRpb25UYWJsZSgpO1xuICAgICAgICAgICAgJChcIiNzZWN0aW9uNCA+IGRpdi5yb3cuZmFjdG9yRXh0cmFmYWN0b3JFeHRyYWN0aW9uQnV0dG9uRGl2XCIpLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuXG4gICAgLypcbiAgICAvL1xuICAgIC8vICoqKiogU0VDVElPTiAzICoqKiogZmFjdG9yIGV4dHJhY3Rpb25zXG4gICAgLy9cbiAgICAqL1xuICAgIC8vIHRvIHN0YXJ0IHBjYSBhbmQgZHJhdyBQQ0EgdGFibGVcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlBjYUV4dHJhY3Rpb25CdXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGJ1dHRvbiwgYnV0dG9uMiwgWCwgdDAsIHQxO1xuXG4gICAgICAgICAgICAvLyB2YXIgbGFuZ3VhZ2UgPSBRQVYuZ2V0U3RhdGUoXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgICAgIC8vIHZhciBQY2FCdXRUZXh0ID0gcmVzb3VyY2VzW2xhbmd1YWdlXS50cmFuc2xhdGlvbltcIlByaW5jaXBhbCBjb21wb25lbnRzXCJdO1xuXG4gICAgICAgICAgICB0MCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgICAgICAgICAvLyAgIGJ1dHRvbiA9ICQodGhpcyk7XG4gICAgICAgICAgICAvLyBidXR0b24ucmVtb3ZlQ2xhc3MoXCJibGFja0hvdmVyXCIpO1xuICAgICAgICAgICAgLy8gYnV0dG9uLmFkZENsYXNzKFwiYnV0dG9uQWN0aW9uQ29tcGxldGVcIik7XG4gICAgICAgICAgICAvLyBidXR0b24ucHJvcCgndmFsdWUnLCBQY2FCdXRUZXh0KTtcbiAgICAgICAgICAgIC8vIGJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBidXR0b24yID0gJChcIiNmYWN0b3JFeHRyYWN0aW9uQnV0dG9uXCIpO1xuICAgICAgICAgICAgLy8gYnV0dG9uMi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyAkKFwiI3Jlc2V0QW5hbHlzaXNCdXR0b25cIikucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIFggPSBRQVYuZ2V0U3RhdGUoXCJvcmlnaW5hbENvcnJlbGF0aW9uVmFsdWVzXCIpO1xuICAgICAgICAgICAgUENBLmRvUHJpbmNpcGFsQ29tcG9uZW50cyhYKTtcblxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwibnVtRmFjdG9yc0V4dHJhY3RlZFwiLCA4KTtcblxuICAgICAgICAgICAgdDEgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJyVjIFBDQSBjb21wbGV0ZWQgaW4gJyArICh0MSAtIHQwKS50b0ZpeGVkKDApICsgJyBtaWxsaXNlY29uZHMnLCAnYmFja2dyb3VuZDogYmxhY2s7IGNvbG9yOiB3aGl0ZScpO1xuXG4gICAgICAgICAgICAkKFwiI3NlY3Rpb241ID4gZGl2LnJvdy5mYWN0b3JzVG9LZWVwRm9yUm90YXRpb25EaXZcIikuc2hvdygpO1xuXG5cbiAgICAgICAgICAgIC8vIHJlcXVpcmVkIGZvciBmaXJlZm94IHRvIHJlZ2lzdGVyIGV2ZW50XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cblxuICAgIC8vIENlbnRyb2lkIGZhY3RvciBleHRyYXRpb24gYnV0dG9uIGxpc3RlbmVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNmYWN0b3JFeHRyYWN0aW9uQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgYnV0dG9uMiwgZGF0YUFycmF5O1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICB2YXIgY2VudEZhY0J1dFRleHQgPSByZXNvdXJjZXNbbGFuZ3VhZ2VdLnRyYW5zbGF0aW9uW1wiQ2VudHJvaWQgZmFjdG9yc1wiXTtcblxuICAgICAgICAgICAgQ0VOVFJPSUQuZmlyZUZhY3RvckV4dHJhY3Rpb24oKTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJibGFja0hvdmVyXCIpLmFkZENsYXNzKFwiYnV0dG9uQWN0aW9uQ29tcGxldGVcIikucHJvcCgndmFsdWUnLCBjZW50RmFjQnV0VGV4dCkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgICAgICAgICAgYnV0dG9uMiA9ICQoXCIjUGNhRXh0cmFjdGlvbkJ1dHRvblwiKTtcbiAgICAgICAgICAgIGJ1dHRvbjIucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgICAgICAgICAgJChcIiNyZXNldEFuYWx5c2lzQnV0dG9uXCIpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXG4gICAgICAgICAgICBDRU5UUk9JRC5kcmF3RXh0cmFjdGVkRmFjdG9yc1RhYmxlKCk7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgc2NyZWUgcGxvdFxuICAgICAgICAgICAgZGF0YUFycmF5ID0gUUFWLmdldFN0YXRlKFwiY2VudHJvaWRFaWdlbnZhbHVlc1wiKTtcbiAgICAgICAgICAgIGRhdGFBcnJheS5zaGlmdCgpO1xuICAgICAgICAgICAgVVRJTC5kcmF3U2NyZWVQbG90KGRhdGFBcnJheSk7XG5cbiAgICAgICAgICAgICQoXCIjc2VjdGlvbjQgPiBpbnB1dFwiKS5zaG93KCk7XG4gICAgICAgICAgICAkKFwiI3NlY3Rpb241ID4gZGl2LnJvdy5mYWN0b3JzVG9LZWVwRm9yUm90YXRpb25EaXZcIikuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyByZXF1aXJlZCBmb3IgZmlyZWZveCB0byByZWdpc3RlciBldmVudD9cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGNsZWFyIHZpZXcgZm9yIHJlc2V0IGFuYWx5c2lzXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNyZXNldEFuYWx5c2lzQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBWSUVXLmRlc3Ryb3lFeHRyYWN0aW9uVGFibGVzKCk7XG4gICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGQzLnNlbGVjdChcIiNzY3JlZVBsb3REaXYgc3ZnXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJChcIiNzZWN0aW9uNCA+IGlucHV0XCIpLmhpZGUoKTtcblxuICAgICAgICAgICAgVklFVy5jbGVhclNlY3Rpb25zXzRfNV82KCk7XG4gICAgICAgICAgICAvLyBudW0gZmFjdG9ycyB0byBrZWVwIGRpdlxuICAgICAgICAgICAgJChcIiNzZWN0aW9uNSA+IGRpdi5yb3cuZmFjdG9yc1RvS2VlcEZvclJvdGF0aW9uRGl2XCIpLmhpZGUoKTtcblxuICAgICAgICAgICAgLy8gcmVzZXQgc3RhdGVcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInJvdEZhY1N0YXRlQXJyYXlcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ0ZW1wUm90RmFjU3RhdGVBcnJheVwiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcIm51bWJlckZhY3RvcnNFeHRyYWN0ZWRcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJmU2lnQ3JpdGVyaW9uXCIsIFwiXCIpO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwicm93SDJcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJmU2lnQ3JpdGVyaW9uUmVzdWx0c1wiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImV4cFZhclwiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImNvbHVtbkhlYWRlcnNBcnJheVwiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInNhdmVSb3RhdGlvbkNvdW50ZXJcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJyb3RGYWNTdGF0ZUFycmF5QXJjaGl2ZTFcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJjZW50cm9pZEZhY3RvcnNcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJhbmFseXNpc091dHB1dFwiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImZhY3Rvck1hdHJpeFRyYW5zcG9zZWRcIiwgXCJcIik7XG5cbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImNlbnRyb2lkRmFjdG9yc1wiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInR5cGVPZkZhY3RvclwiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInBjYU51bWJlckZhY3RvcnNFeHRyYWN0ZWRcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJmYWN0b3JMYWJlbHNcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJlaWdlblZhbHVlc1NvcnRlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImVpZ2VuVmFsdWVzQXNQZXJjZW50c1wiLCBcIlwiKTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImVpZ2VuVmFsdWVzQ3VtdWxQZXJjZW50QXJyYXlcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJlaWdlblZlY3NcIiwgXCJcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJudW1GYWN0b3JzRXh0cmFjdGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwicGNhVGFibGVIZWFkZXJzXCIsIFwiXCIpO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwicGNhVGFibGVUYXJnZXRzXCIsIFwiXCIpO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwibnVtRmFjdG9yc1JldGFpbmVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidHlwZU9mUm90YXRpb25cIiwgXCJcIik7XG5cbiAgICAgICAgICAgIC8vIHJlcXVpcmVkIGZvciBmaXJlZm94IHRvIHJlZ2lzdGVyIGV2ZW50XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvKlxuICAgIC8vXG4gICAgLy8gKioqKiBTRUNUSU9OIDQgKioqKiBSb3RhdGlvblxuICAgIC8vXG4gICAgKi9cblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHJvdGF0aW9uIGJ1dHRvbiAxIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICQoXCIjY2xvY2t3aXNlQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciByb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSA9IHBhcnNlSW50KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJyb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZVwiKSk7XG5cbiAgICAgICAgICAgIHZhciByb3RhdGlvbkRlZ3JlZSA9IHBhcnNlSW50KCQoXCIjcm90YXRpb25EaXNwbGF5SW5wdXRcIikudmFsKCkpO1xuICAgICAgICAgICAgcm90YXRpb25EZWdyZWVEaXNwbGF5VmFsdWUgPSByb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSArIHJvdGF0aW9uRGVncmVlO1xuICAgICAgICAgICAgdmFyIHJvdGF0aW9uRGVncmVlRGlzcGxheSA9ICQoXCIjaGFuZFJvdGF0aW9uRGlzcGxheUNvbnRhaW5lciBkaXZcIik7XG4gICAgICAgICAgICByb3RhdGlvbkRlZ3JlZURpc3BsYXkuaHRtbChyb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSArIFwiJmRlZ1wiKTtcblxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInJvdGF0aW9uRGVncmVlRGlzcGxheVZhbHVlXCIsIHJvdGF0aW9uRGVncmVlRGlzcGxheVZhbHVlKTtcblxuICAgICAgICAgICAgUk9UQS5zYXZlUm90YXRpb25CdXR0b25Db2xvcihyb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSk7XG5cbiAgICAgICAgICAgIFJPVEEuY2FsY3VsYXRlUm90YXRlZEZhY3RvcnMocm90YXRpb25EZWdyZWUpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gcm90YXRpb24gYnV0dG9uIDIgZXZlbnQgbGlzdGVuZXJcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2NvdW50ZXItY2xvY2t3aXNlQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciByb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJyb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZVwiKTtcblxuICAgICAgICAgICAgdmFyIHJvdGF0aW9uRGVncmVlID0gcGFyc2VJbnQoJChcIiNyb3RhdGlvbkRpc3BsYXlJbnB1dFwiKS52YWwoKSk7XG4gICAgICAgICAgICByb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSA9IHJvdGF0aW9uRGVncmVlRGlzcGxheVZhbHVlIC0gcm90YXRpb25EZWdyZWU7XG5cbiAgICAgICAgICAgIHZhciByb3RhdGlvbkRlZ3JlZURpc3BsYXkgPSAkKFwiI2hhbmRSb3RhdGlvbkRpc3BsYXlDb250YWluZXIgZGl2XCIpO1xuICAgICAgICAgICAgcm90YXRpb25EZWdyZWVEaXNwbGF5Lmh0bWwocm90YXRpb25EZWdyZWVEaXNwbGF5VmFsdWUgKyBcIiZkZWdcIik7XG4gICAgICAgICAgICByb3RhdGlvbkRlZ3JlZSA9IC1yb3RhdGlvbkRlZ3JlZTtcblxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInJvdGF0aW9uRGVncmVlRGlzcGxheVZhbHVlXCIsIHJvdGF0aW9uRGVncmVlRGlzcGxheVZhbHVlKTtcblxuICAgICAgICAgICAgUk9UQS5zYXZlUm90YXRpb25CdXR0b25Db2xvcihyb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSk7XG4gICAgICAgICAgICBST1RBLmNhbGN1bGF0ZVJvdGF0ZWRGYWN0b3JzKHJvdGF0aW9uRGVncmVlKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHB1c2ggcm90YXRpb24gdmFsdWVzIHRvIHJvdGF0aW9uIHRhYmxlIGFuZCBhcnJheVxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc2F2ZVJvdGF0aW9uQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0ZXN0Rm9yU3BsaXQgPSBRQVYuZ2V0U3RhdGUoXCJoYXNTcGxpdEZhY3RvclwiKTtcbiAgICAgICAgICAgIGlmICh0ZXN0Rm9yU3BsaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgVklFVy5zaG93RGlzYWJsZWRGdW5jdGlvbnNBZnRlclNwbGl0TW9kYWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgUk9UQS5zYXZlUm90YXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuXG4gICAgLy8gdHJpZ2dlcmVkIGJ5IFwiRGlzcGxheSBTZWxlY3RlZCBGYWN0b3JzXCIgYnV0dG9uXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNnZW5lcmF0ZVJvdGF0aW9uSXRlbXNCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHRlc3RGb3JTcGxpdCA9IFFBVi5nZXRTdGF0ZShcImhhc1NwbGl0RmFjdG9yXCIpO1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICB2YXIgYXBwZW5kRXJyb3JUZXh0MSA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJzZWxlY3RlZEZhY3RvcnNFcnJvclwiXTtcblxuICAgICAgICAgICAgLy8gcHVsbCB0aGUgc2VsZWN0ZWQgZmFjdG9ycyBcbiAgICAgICAgICAgIHZhciBmYWNOdW1iZXJTZWxlY3RlZENoZWNrID0gUk9UQS5zZXRSb3RhdGlvbkZhY3RvcnNGcm9tQ2hlY2tib3goKTtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBmYWNOdW1iZXJTZWxlY3RlZENoZWNrLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggIT09IDIpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2dlbmVyaWNFcnJvck1vZGFsIC5lcnJvclBhbmVsXCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgJChcIiNnZW5lcmljRXJyb3JNb2RhbCAuZXJyb3JQYW5lbFwiKS5hcHBlbmQoXCI8cD5cIiArIGFwcGVuZEVycm9yVGV4dDEgKyBcIjwvcD48YnI+XCIpO1xuICAgICAgICAgICAgICAgIFZJRVcuc2hvd0dlbmVyaWNFcnJvck1vZGFsKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGVzdEZvclNwbGl0ID4gMCkge1xuICAgICAgICAgICAgICAgIFZJRVcuc2hvd0Rpc2FibGVkRnVuY3Rpb25zQWZ0ZXJTcGxpdE1vZGFsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByb3RGYWNTdGF0ZUFycmF5ID0gUUFWLmdldFN0YXRlKFwicm90RmFjU3RhdGVBcnJheVwiKTtcbiAgICAgICAgICAgICAgICAvLyB0b2RvIC0gc2VlIGlmIHRoaXMgY2FuIGJlIGRlbGV0ZWQgLSBhbHJlYWR5IGNsb25lZCB3aXRoIGdldFN0YXRlIG1ldGhvZD9cbiAgICAgICAgICAgICAgICB2YXIgdGVtcFJvdEZhY1N0YXRlQXJyYXkgPSBfLmNsb25lRGVlcChyb3RGYWNTdGF0ZUFycmF5KTtcbiAgICAgICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ0ZW1wUm90RmFjU3RhdGVBcnJheVwiLCB0ZW1wUm90RmFjU3RhdGVBcnJheSk7XG5cbiAgICAgICAgICAgICAgICAvLyBwdWxsIHRoZSBzZWxlY3RlZCBmYWN0b3JzJyBkYXRhXG4gICAgICAgICAgICAgICAgUk9UQS5zZXRUd29GYWN0b3JSb3RhdGlvbmFsQXJyYXkocm90RmFjU3RhdGVBcnJheSk7XG5cbiAgICAgICAgICAgICAgICAvLyBleHBlY3RzIGJhcmUgZnVsbCBhcnJheVxuICAgICAgICAgICAgICAgIHZhciBhcnJheVdpdGhDb21tdW5hbGl0aWVzID0gUk9UQS5jYWxjdWxhdGVDb21tdW5hbGl0aWVzKHJvdEZhY1N0YXRlQXJyYXkpO1xuXG4gICAgICAgICAgICAgICAgLy8gcHJlcCBmb3IgRDMgY2hhcnQgYXV0b2ZsYWdnaW5nIHRlc3RzXG4gICAgICAgICAgICAgICAgLy8gdmFyIGQzQXV0b2ZsYWdnaW5nUHJlcCA9IGQzQXV0b2ZsYWdnaW5nKGFycmF5V2l0aENvbW11bmFsaXRpZXMpO1xuXG4gICAgICAgICAgICAgICAgLy8gZ2V0cyBhcnJheSBmb3IgZlNpZyB0ZXN0aW5nIGZyb20gTFMgb2YgY2FsY3VsYXRlQ29tbXVuYWxpdGllcyAtIHNldHMgZlNpZ0NyaXRlcmlvblJlc3VsdHNcbiAgICAgICAgICAgICAgICBST1RBLmNhbGN1bGF0ZWZTaWdDcml0ZXJpb25WYWx1ZXMoXCJmbGFnXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJucyBkYXRhVmFsdWVzQXJyYXkgZm9yIEQzIGNoYXJ0XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlcyBhcnJheXMgZm9yIHRhYmxlL0QzIChMUykgZnJvbSBzdGF0ZVxuICAgICAgICAgICAgICAgIHZhciBkM1ByZXAgPSBST1RBLmRvRDNDaGFydERhdGFQcmVwKGFycmF5V2l0aENvbW11bmFsaXRpZXMpO1xuXG4gICAgICAgICAgICAgICAgJChcIiNjaGFydEFuZFRhYmxlRGlzcGxheUNvbnRhaW5lclwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICBST1RBLmRyYXdEM0NoYXJ0KGQzUHJlcCk7XG4gICAgICAgICAgICAgICAgLy8gY2xvbmUgdGhlIHN0YXRlIGFycmF5IHRvIHByZXZlbnQgY2hhbmdlc1xuICAgICAgICAgICAgICAgIHZhciBjaGFydERhdGEgPSBfLmNsb25lRGVlcChyb3RGYWNTdGF0ZUFycmF5KTtcbiAgICAgICAgICAgICAgICB2YXIgcHJlcFR3b0ZhY3RvclRhYmxlID0gUk9UQS5wcmVwVHdvRmFjdG9yVXBkYXRlSGFuZHNvbnRhYmxlKGNoYXJ0RGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgYmFzZWxpbmUgZGF0YSB0byBjYWxjIFwiY2hhbmdlIGR1ZSB0byBmYWN0b3Igcm90YXRpb25cIiAoMiBmYWN0b3IpXG4gICAgICAgICAgICAgICAgdmFyIGJhc2VMaW5lRGF0YSA9IF8uY2xvbmVEZWVwKHByZXBUd29GYWN0b3JUYWJsZSk7XG4gICAgICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwiYmFzZUxpbmVEYXRhXCIsIGJhc2VMaW5lRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyBjcmVhdGVzIDIgZmFjdG9yIHJvdGF0aW9uIGRpc3BsYXkgdGFibGUgZGF0YVxuICAgICAgICAgICAgICAgIHZhciBpc05ld1NlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgUk9UQS51cGRhdGVEYXRhdGFibGUxKHByZXBUd29GYWN0b3JUYWJsZSwgaXNOZXdTZWxlY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgZGVncmVlIGRpc3BsYXksIGJ1dHRvbiBjb2xvciBhbmQgc3RvcmVkIHZhbHVlXG4gICAgICAgICAgICAgICAgJChcIiNoYW5kUm90YXRpb25EaXNwbGF5Q29udGFpbmVyIGRpdlwiKS5odG1sKFwiMCZkZWdcIik7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInJvdGF0aW9uRGVncmVlRGlzcGxheVZhbHVlXCIsIDApO1xuICAgICAgICAgICAgICAgIHZhciByb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgUk9UQS5zYXZlUm90YXRpb25CdXR0b25Db2xvcihyb3RhdGlvbkRlZ3JlZURpc3BsYXlWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAvL2RyYXcgYWxsIGZhY3RvciByb3RhdGlvbiB0YWJsZSBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgICAgICAgICB2YXIgaXNSb3RhdGVkRmFjdG9yc1RhYmxlVXBkYXRlID0gXCJkZXN0cm95XCI7XG4gICAgICAgICAgICAgICAgTE9BRC5kcmF3Um90YXRlZEZhY3RvcnNUYWJsZTIoaXNSb3RhdGVkRmFjdG9yc1RhYmxlVXBkYXRlLCBcIm5vRmxhZ1wiKTsgLy8gbm9GbGFnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cblxuICAgIC8vIGNsZWFyIERPTSB3aGVuIHVzZXIgY2hhbmdlcyBudW1iZXIgZmFjdG9ycyBrZXB0IGZvciByb3RhdGlvblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc2VsZWN0RmFjdG9yc1JvdGF0aW9uXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgVklFVy5jbGVhclNlY3Rpb25zXzRfNV82KCk7XG5cbiAgICAgICAgICAgICQoXCIjZmFjdG9yTG9hZGluZ0NvbnRhaW5lckRpdlwiKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIC8vIGNsZWFyIFByb2plY3QgSGlzdG9yeSBleGNlcHQgZm9yIGZpcnN0IGVudHJ5XG4gICAgICAgICAgICAkKCcjcm90YXRpb25IaXN0b3J5TGlzdCBsaTpub3QoOmZpcnN0KScpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gZ2V0IFVzZXIgaW5wdXQgb24gbnVtYmVyIG9mIGZhY3RvcnMgdG8ga2VlcCBmb3Igcm90YXRpb25cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3NlbmRUb1JvdGF0aW9uQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICB2YXIgbnVtRmFjdG9ycywgZGF0YSwgbG9vcExlbiwgdGVtcDEsIGksIGNlbnRyb2lkRmFjdG9ycztcblxuICAgICAgICAgICAgdmFyIGFwcGVuZEVycm9yVGV4dDEgPSByZXNvdXJjZXNbbGFuZ3VhZ2VdLnRyYW5zbGF0aW9uW1wiUm90YXRlIGVycm9yIDFcIl07XG4gICAgICAgICAgICB2YXIgYXBwZW5kRXJyb3JUZXh0MiA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJSb3RhdGUgZXJyb3IgMlwiXTtcblxuXG4gICAgICAgICAgICBudW1GYWN0b3JzID0gcGFyc2VJbnQoJChcIiNzZWxlY3RGYWN0b3JzUm90YXRpb24gb3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwibnVtRmFjdG9yc1JldGFpbmVkXCIsIG51bUZhY3RvcnMpO1xuXG4gICAgICAgICAgICAvLyBwcnZlbnQgdXNlciBzZWxlY3Rpb24gZXJyb3JzXG4gICAgICAgICAgICB0ZW1wMSA9IFFBVi5udW1GYWN0b3JzRXh0cmFjdGVkIHx8IDA7XG4gICAgICAgICAgICBpZiAobnVtRmFjdG9ycyA+IHRlbXAxKSB7XG4gICAgICAgICAgICAgICAgJChcIiNnZW5lcmljRXJyb3JNb2RhbCAuZXJyb3JQYW5lbFwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICQoXCIjZ2VuZXJpY0Vycm9yTW9kYWwgLmVycm9yUGFuZWxcIikuYXBwZW5kKFwiPHA+XCIgKyBhcHBlbmRFcnJvclRleHQxICsgXCI8L3A+PGJyPlwiKTtcbiAgICAgICAgICAgICAgICBWSUVXLnNob3dHZW5lcmljRXJyb3JNb2RhbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyAkKFwiI3JvdGF0aW9uTGFyZ2VOdW1iZXJFcnJvclwiKS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTmFOKG51bUZhY3RvcnMpKSB7XG4gICAgICAgICAgICAgICAgJChcIiNnZW5lcmljRXJyb3JNb2RhbCAuZXJyb3JQYW5lbFwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICQoXCIjZ2VuZXJpY0Vycm9yTW9kYWwgLmVycm9yUGFuZWxcIikuYXBwZW5kKFwiPHA+XCIgKyBhcHBlbmRFcnJvclRleHQyICsgXCI8L3A+PGJyPlwiKTtcbiAgICAgICAgICAgICAgICBWSUVXLnNob3dHZW5lcmljRXJyb3JNb2RhbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyAkKFwiI3JvdGF0aW9uTmFuRXJyb3JcIikucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vICAkKFwiI3JvdGF0aW9uTGFyZ2VOdW1iZXJFcnJvclwiKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgLy8gJChcIiNyb3RhdGlvbk5hbkVycm9yXCIpLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgICQoXCIjZmFjdG9yTG9hZGluZ0NvbnRhaW5lckRpdlwiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJChcIiNmYWN0b3JWYXJpbWF4QnV0dG9uXCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKFwiI2ZhY3Rvckp1ZGdlbWVudFJvdEJ1dHRvblwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBRQVYuZ2V0U3RhdGUoXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgICAgICAgICB2YXIgZmFjVGV4dCA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJGYWN0b3JzIEtlcHRcIl07XG4gICAgICAgICAgICAgICAgdmFyIGFwcGVuZFRleHQgPSByZXNvdXJjZXNbbGFuZ3VhZ2VdLnRyYW5zbGF0aW9uW1wiRmFjdG9ycyBLZXB0IGZvciBSb3RhdGlvblwiXTtcblxuICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcyhcImJsYWNrSG92ZXJcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKFwiYnV0dG9uQWN0aW9uQ29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnByb3AoJ3ZhbHVlJywgKG51bUZhY3RvcnMgKyAnICcgKyBmYWNUZXh0KSk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cblxuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgcmlnaHQgZGF0YSBhY2NvcmRpbmcgdG8gZmFjdG9yIHR5cGVcbiAgICAgICAgICAgICAgICBpZiAoUUFWLnR5cGVPZkZhY3RvciA9PT0gXCJQQ0FcIikge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gUUFWLmdldFN0YXRlKFwiZWlnZW5WZWNzXCIpO1xuICAgICAgICAgICAgICAgICAgICBsb29wTGVuID0gZGF0YS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGp1c3QgdGhlIGZhY3RvcnMgc2VsZWN0ZWQgZnJvbSBkYXRhXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsb29wTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNsaWNlKDAsIG51bUZhY3RvcnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IFFBVi5nZXRTdGF0ZShcImNlbnRyb2lkRmFjdG9yc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgbG9vcExlbiA9IGRhdGEubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBqdXN0IHRoZSBmYWN0b3JzIHNlbGVjdGVkIGZyb20gZGF0YVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbG9vcExlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2ldID0gZGF0YVtpXS5zbGljZSgwLCBudW1GYWN0b3JzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHNlbmQgZGF0YSB0byBzdGF0ZSBtYXRyaXggYW5kIHRoZW4gdG8gY2hhcnRcbiAgICAgICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJyb3RGYWNTdGF0ZUFycmF5XCIsIGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy8gcHJlcCBmb3IgY2hhcnRcbiAgICAgICAgICAgICAgICBST1RBLmNhbGN1bGF0ZUNvbW11bmFsaXRpZXMoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAkKFwiI3JvdGF0aW9uSGlzdG9yeUxpc3RcIikuYXBwZW5kKCc8bGk+JyArIG51bUZhY3RvcnMgKyBhcHBlbmRUZXh0ICsgJzwvbGk+Jyk7XG5cbiAgICAgICAgICAgICAgICAvLyBnZXRzIGFycmF5IGZvciBmU2lnIHRlc3RpbmcgZnJvbSBMUyBvZiBjYWxjdWxhdGVDb21tdW5hbGl0aWVzIC0gc2V0cyBmU2lnQ3JpdGVyaW9uUmVzdWx0c1xuICAgICAgICAgICAgICAgIFJPVEEuY2FsY3VsYXRlZlNpZ0NyaXRlcmlvblZhbHVlcyhcIm5vRmxhZ1wiKTtcblxuICAgICAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInRlbXBSb3RGYWNTdGF0ZUFycmF5XCIsIGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy9kcmF3IHJvdGF0aW9uIHRhYmxlIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgICAgICAgICAgIHZhciBpc1JvdGF0ZWRGYWN0b3JzVGFibGVVcGRhdGUgPSBcIm5vXCI7XG4gICAgICAgICAgICAgICAgTE9BRC5kcmF3Um90YXRlZEZhY3RvcnNUYWJsZTIoaXNSb3RhdGVkRmFjdG9yc1RhYmxlVXBkYXRlLCBcIm5vRmxhZ1wiKTtcblxuICAgICAgICAgICAgICAgIC8vIGFyY2hpdmUgcm90YXRpb24gbWF0cml4IHN0YXRlIGFuZCBmYWN0b3Igcm90YXRpb24gdGFibGVcbiAgICAgICAgICAgICAgICBST1RBLnNhdmVSb3RhdGlvbkFyY2hpdmVDb3VudGVyKFwicmVzZXRcIik7XG4gICAgICAgICAgICAgICAgVVRJTC5hcmNoaXZlRmFjdG9yU2NvcmVTdGF0ZU1hdHJpeEFuZERhdGF0YWJsZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gZm9ybWF0IGZvciB1c2Ugd2l0aCB2YXJpbWF4XG4gICAgICAgICAgICAgICAgY2VudHJvaWRGYWN0b3JzID0gXy56aXAuYXBwbHkoXywgZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyB0b2RvIC0gY29udmVydCB0byBzZW5kIHRvIHN0YXRlIG1hdHJpeFxuICAgICAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcImNlbnRyb2lkRmFjdG9yc1wiLCBjZW50cm9pZEZhY3RvcnMpO1xuXG4gICAgICAgICAgICAgICAgJChcIiNzZWxlY3RGYWN0b3JzRm9yT3V0cHV0QnV0dG9uXCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGRpc3BsYXkgcm90YXRpb24gY2hhcnQgb3B0aW9ucyBpbiBET01cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2ZhY3Rvckp1ZGdlbWVudFJvdEJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ZXN0Rm9yU3BsaXQgPSBRQVYuZ2V0U3RhdGUoXCJoYXNTcGxpdEZhY3RvclwiKTtcbiAgICAgICAgICAgIGlmICh0ZXN0Rm9yU3BsaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgVklFVy5zaG93RGlzYWJsZWRGdW5jdGlvbnNBZnRlclNwbGl0TW9kYWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidHlwZU9mUm90YXRpb25cIiwgXCJqdWRnZW1lbnRhbFwiKTtcbiAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBRQVYuZ2V0U3RhdGUoXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgICAgICAgICB2YXIganVkZ2VUZXh0ID0gcmVzb3VyY2VzW2xhbmd1YWdlXS50cmFuc2xhdGlvbltcIkp1ZGdlbWVudGFsIHJvdGF0aW9uXCJdO1xuICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcyhcImJsYWNrSG92ZXJcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKFwiYnV0dG9uQWN0aW9uQ29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnByb3AoJ3ZhbHVlJywganVkZ2VUZXh0KTtcbiAgICAgICAgICAgICAgICBidXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIC8vIGdldCBudW1iZXIgb2YgY2hlY2tib3hlcyBmcm9tIFVJIGFuZCBhcHBlbmQgdG8gRE9NXG4gICAgICAgICAgICAgICAgVVRJTC5hZGRGYWN0b3JTZWxlY3RDaGVja2JveGVzUm90YXRpb24oUUFWLm51bUZhY3RvcnNSZXRhaW5lZCk7XG4gICAgICAgICAgICAgICAgJChcIiNqdWRnZW1lbnRhbFJvdGF0aW9uQ29udGFpbmVyXCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9KSgpO1xuXG4gICAgLy8gY2FsbCB2YXJpbWF4XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNmYWN0b3JWYXJpbWF4QnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRlc3RGb3JTcGxpdCA9IFFBVi5nZXRTdGF0ZShcImhhc1NwbGl0RmFjdG9yXCIpO1xuICAgICAgICAgICAgaWYgKHRlc3RGb3JTcGxpdCA+IDApIHtcbiAgICAgICAgICAgICAgICBWSUVXLnNob3dEaXNhYmxlZEZ1bmN0aW9uc0FmdGVyU3BsaXRNb2RhbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ0eXBlT2ZSb3RhdGlvblwiLCBcInZhcmltYXhcIik7XG4gICAgICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICAgICAgdmFyIHZhcm1heFJvdEJ1dFRleHQgPSByZXNvdXJjZXNbbGFuZ3VhZ2VdLnRyYW5zbGF0aW9uW1wiVmFyaW1heCByb3RhdGlvbiBhcHBsaWVkXCJdO1xuICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcyhcImJsYWNrSG92ZXJcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKFwiYnV0dG9uQWN0aW9uQ29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnByb3AoJ3ZhbHVlJywgdmFybWF4Um90QnV0VGV4dCk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBhdm9pZCBwcm9ibGVtIHdpdGggcmVpbml0aWFsaXphdGlvbiBhbmQgZGlzcGxheSBvZiAyIGZhY3RvciB0YWJsZVxuICAgICAgICAgICAgICAgIHZhciB0YWJsZUNoZWNrID0gJChcIiNqdWRnZW1lbnRhbFJvdGF0aW9uQ29udGFpbmVyXCIpLmlzKFwiOnZpc2libGVcIik7XG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgUk9UQS5yZUluaXRpYWxpemVQbG90QW5kQ2hhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVkFSSU1BWC5maXJlVmFyaW1heFJvdGF0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBzY3JlZSBwbG90IGltYWdlIGRvd25sb2FkXG4gICAgICAgICQoXCIuc2NyZWVQbG90RG93bmxvYWRCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IFVUSUwuY3VycmVudERhdGUxKCk7XG4gICAgICAgICAgICB2YXIgdGltZSA9IFVUSUwuY3VycmVudFRpbWUxKCk7XG4gICAgICAgICAgICB2YXIgZGF0ZVRpbWUgPSBkYXRlICsgXCJfXCIgKyB0aW1lO1xuICAgICAgICAgICAgdmFyIHByb2plY3ROYW1lID0gUUFWLmdldFN0YXRlKFwicWF2UHJvamVjdE5hbWVcIik7XG4gICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBRQVYuZ2V0U3RhdGUoXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgICAgIHZhciBzY3JlZVBsb3RUcmFuc2xhdGlvbiA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJTY3JlZSBQbG90XCJdO1xuXG4gICAgICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBwcm9qZWN0TmFtZSArIFwiX1wiICsgc2NyZWVQbG90VHJhbnNsYXRpb24gKyBcIl9cIiArIGRhdGVUaW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGQzX3NhdmVfc3ZnLnNhdmUoZDMuc2VsZWN0KCcjc2NyZWVQbG90U1ZHJykubm9kZSgpLCBjb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gc2NyZWUgcGxvdCBpbWFnZSBkb3dubG9hZFxuICAgICAgICAkKFwiLnNjcmVlUGxvdERvd25sb2FkUG5nQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjbGlja2VkXCIpO1xuICAgICAgICAgICAgdmFyIGRhdGUgPSBVVElMLmN1cnJlbnREYXRlMSgpO1xuICAgICAgICAgICAgdmFyIHRpbWUgPSBVVElMLmN1cnJlbnRUaW1lMSgpO1xuICAgICAgICAgICAgdmFyIGRhdGVUaW1lID0gZGF0ZSArIFwiX1wiICsgdGltZTtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0TmFtZSA9IFFBVi5nZXRTdGF0ZShcInFhdlByb2plY3ROYW1lXCIpO1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICB2YXIgc2NyZWVQbG90VHJhbnNsYXRpb24gPSByZXNvdXJjZXNbbGFuZ3VhZ2VdLnRyYW5zbGF0aW9uW1wiU2NyZWUgUGxvdFwiXTtcbiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IHByb2plY3ROYW1lICsgXCJfXCIgKyBzY3JlZVBsb3RUcmFuc2xhdGlvbiArIFwiX1wiICsgZGF0ZVRpbWU7XG4gICAgICAgICAgICB2YXIgc3ZnU3RyaW5nID0gVVRJTC5nZXRTVkdTdHJpbmcoZDMuc2VsZWN0KCcjc2NyZWVQbG90U1ZHJylcbiAgICAgICAgICAgICAgICAubm9kZSgpKTtcbiAgICAgICAgICAgIHZhciBzdmdDaGFyYWN0ZXJpc3RpY3MgPSBkMy5zZWxlY3QoJyNzY3JlZVBsb3RTVkcnKTtcbiAgICAgICAgICAgIFVUSUwuZG93bmxvYWRQbmdJbWFnZXMoc3ZnU3RyaW5nLCBzdmdDaGFyYWN0ZXJpc3RpY3MsIGZpbGVuYW1lKTsgLy8gcGFzc2VzIEJsb2IgYW5kIGZpbGVzaXplIFxuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZG93bmxvYWQganVkZ2VtZW50YWwgcm90YXRpb24gY2hhcnRcbiAgICAgICAgJChcIi5yb3RhdGlvbkNoYXJ0RG93bmxvYWRCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IFVUSUwuY3VycmVudERhdGUxKCk7XG4gICAgICAgICAgICB2YXIgdGltZSA9IFVUSUwuY3VycmVudFRpbWUxKCk7XG4gICAgICAgICAgICB2YXIgZGF0ZVRpbWUgPSBkYXRlICsgXCJfXCIgKyB0aW1lO1xuICAgICAgICAgICAgdmFyIHByb2plY3ROYW1lID0gUUFWLmdldFN0YXRlKFwicWF2UHJvamVjdE5hbWVcIik7XG4gICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBRQVYuZ2V0U3RhdGUoXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgICAgIHZhciBzY2F0dGVyUGxvdFRyYW5zbGF0aW9uID0gcmVzb3VyY2VzW2xhbmd1YWdlXS50cmFuc2xhdGlvbltcIkRvd25sb2FkIFJvdGF0aW9uIENoYXJ0XCJdO1xuXG4gICAgICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBwcm9qZWN0TmFtZSArIFwiX1wiICsgc2NhdHRlclBsb3RUcmFuc2xhdGlvbiArIFwiX1wiICsgZGF0ZVRpbWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZDNfc2F2ZV9zdmcuc2F2ZShkMy5zZWxlY3QoJyNzY2F0dGVyQ2hhcnQnKS5ub2RlKCksIGNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBkb3dubG9hZCBqdWRnZW1lbnRhbCByb3RhdGlvbiBjaGFydFxuICAgICAgICAkKFwiLnJvdGF0aW9uQ2hhcnREb3dubG9hZFBuZ0J1dHRvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicG5nIHJvdCBjaGFydCBjbGlja2VkXCIpO1xuICAgICAgICAgICAgdmFyIGRhdGUgPSBVVElMLmN1cnJlbnREYXRlMSgpO1xuICAgICAgICAgICAgdmFyIHRpbWUgPSBVVElMLmN1cnJlbnRUaW1lMSgpO1xuICAgICAgICAgICAgdmFyIGRhdGVUaW1lID0gZGF0ZSArIFwiX1wiICsgdGltZTtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0TmFtZSA9IFFBVi5nZXRTdGF0ZShcInFhdlByb2plY3ROYW1lXCIpO1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICB2YXIgc2NhdHRlclBsb3RUcmFuc2xhdGlvbiA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb25bXCJEb3dubG9hZCBSb3RhdGlvbiBDaGFydFwiXTtcbiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IHByb2plY3ROYW1lICsgXCJfXCIgKyBzY2F0dGVyUGxvdFRyYW5zbGF0aW9uICsgXCJfXCIgKyBkYXRlVGltZTtcbiAgICAgICAgICAgIHZhciBzdmdTdHJpbmcgPSBVVElMLmdldFNWR1N0cmluZyhkMy5zZWxlY3QoJyNzY2F0dGVyQ2hhcnQnKVxuICAgICAgICAgICAgICAgIC5ub2RlKCkpO1xuICAgICAgICAgICAgdmFyIHN2Z0NoYXJhY3RlcmlzdGljcyA9IGQzLnNlbGVjdCgnI3NjYXR0ZXJDaGFydCcpO1xuICAgICAgICAgICAgVVRJTC5kb3dubG9hZFBuZ0ltYWdlcyhzdmdTdHJpbmcsIHN2Z0NoYXJhY3RlcmlzdGljcywgZmlsZW5hbWUpOyAvLyBwYXNzZXMgQmxvYiBhbmQgZmlsZXNpemUgXG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cblxuXG4gICAgLy8gc2V0IGp1ZGdlbWVudGFsIHJvdGF0aW9uIGNoYXJ0IG9wdGlvbnNcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiLnJvdGF0aW9uQ2hhcnRPcHRpb25zQnV0dG9uXCIpLm9uKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBWSUVXLnNob3dSb3RhdGlvbkNoYXJ0T3B0aW9uc01vZGFsKCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3JvdGF0aW9uQ2hhcnRPcHRpb25zTW9kYWxcIikub24oJ2NoYW5nZScsICdpbnB1dFt0eXBlPWNvbG9yXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3RDaGFydENvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInJvdENoYXJ0Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGhleENvZGUyID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIHJvdENoYXJ0Q29uZmlnWyQodGhpcykuYXR0cignbmFtZScpXSA9IGhleENvZGUyO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwicm90Q2hhcnRDb25maWdcIiwgcm90Q2hhcnRDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gY29udHJvbCByb3RhdGlvbiBjaGFydCBvcHRpb25zXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNyb3RhdGlvbkNoYXJ0T3B0aW9uc01vZGFsXCIpLm9uKCdjbGljaycsICcuYXBwbHlDaGFuZ2VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvdENoYXJ0Q29uZmlnID0gUUFWLmdldFN0YXRlKFwicm90Q2hhcnRDb25maWdcIikgfHwge307XG4gICAgICAgICAgICByb3RDaGFydENvbmZpZy5zaWduaWZpY2FuY2VDb2xvckEgPSByb3RDaGFydENvbmZpZy5zaWduaWZpY2FuY2VDb2xvckFQcmVwO1xuICAgICAgICAgICAgcm90Q2hhcnRDb25maWcuc2lnbmlmaWNhbmNlQ29sb3JCID0gcm90Q2hhcnRDb25maWcuc2lnbmlmaWNhbmNlQ29sb3JCUHJlcDtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInJvdENoYXJ0Q29uZmlnXCIsIHJvdENoYXJ0Q29uZmlnKTtcblxuICAgICAgICAgICAgJChcIiN0d29GYWN0b3JEaXNwbGF5VGFibGVEaXZcIikucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICQoXCIjY2hhcnRBbmRUYWJsZUNvbnRhaW5lckRpdlwiKS5hcHBlbmQoJCgnPGRpdi8+JykuYXR0cihcImlkXCIsIFwidHdvRmFjdG9yRGlzcGxheVRhYmxlRGl2XCIpKTtcbiAgICAgICAgICAgICQoXCIjdHdvRmFjdG9yRGlzcGxheVRhYmxlRGl2XCIpLmFwcGVuZCgkKCc8dGFibGUvPicpLmF0dHIoXCJpZFwiLCBcInR3b0ZhY3RvckRpc3BsYXlUYWJsZVwiKS5hZGRDbGFzcyhcImRpc3BsYXkgY29tcGFjdCBub3dyYXAgY2VsbC1ib3JkZXJcIikuYXR0cihcIndpZHRoXCIsIFwiMTAwJVwiKSk7XG5cbiAgICAgICAgICAgICQoXCIjZ2VuZXJhdGVSb3RhdGlvbkl0ZW1zQnV0dG9uXCIpLmNsaWNrKCk7XG5cbiAgICAgICAgICAgICQoXCIjcm90YXRpb25DaGFydE9wdGlvbnNNb2RhbFwiKS5pemlNb2RhbCgnY2xvc2UnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGNsb3NlIG1vZGFsIGJveFxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjcm90YXRpb25DaGFydE9wdGlvbnNNb2RhbFwiKS5vbignY2xpY2snLCAnLmJ1dHRvbi1jYW5jZWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiI3JvdGF0aW9uQ2hhcnRPcHRpb25zTW9kYWxcIikuaXppTW9kYWwoJ2Nsb3NlJyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyByZW1vdmUgY2lyY2xlIGhpZ2hsaWdodGluZz8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNyb3RhdGlvbkNoYXJ0T3B0aW9uc01vZGFsXCIpLm9uKCdjbGljaycsICcjcmVtb3ZlQ2lyY2xlSGlnaGxpZ2h0RGl2IDpyYWRpbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3RDaGFydENvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInJvdENoYXJ0Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3JvdGF0aW9uQ2hhcnRPcHRpb25zTW9kYWwsICNyZW1vdmVDaXJjbGVIaWdobGlnaHREaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICByb3RDaGFydENvbmZpZy5yZW1vdmVDaXJjbGVIaWdobGlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkcmFkaW9PcHRpb24gPT09IFwiTm9cIikge1xuICAgICAgICAgICAgICAgIHJvdENoYXJ0Q29uZmlnLnJlbW92ZUNpcmNsZUhpZ2hsaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwicm90Q2hhcnRDb25maWdcIiwgcm90Q2hhcnRDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gcmVtb3ZlIGNpcmNsZXM/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjcm90YXRpb25DaGFydE9wdGlvbnNNb2RhbFwiKS5vbignY2xpY2snLCAnI3JlbW92ZUNpcmNsZXNEaXYgOnJhZGlvJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvdENoYXJ0Q29uZmlnID0gUUFWLmdldFN0YXRlKFwicm90Q2hhcnRDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjcm90YXRpb25DaGFydE9wdGlvbnNNb2RhbCwgI3JlbW92ZUNpcmNsZXNEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICByb3RDaGFydENvbmZpZy5yZW1vdmVDaXJjbGVzID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICByb3RDaGFydENvbmZpZy5yZW1vdmVDaXJjbGVzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJyb3RDaGFydENvbmZpZ1wiLCByb3RDaGFydENvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyB1c2UgaWQgbnVtYmVyIG9yIHJlc3BvbmRlbnQgbmFtZT8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNyb3RhdGlvbkNoYXJ0T3B0aW9uc01vZGFsXCIpLm9uKCdjbGljaycsICcjY2hhcnRJZGVudGlmaWVyRGl2IDpyYWRpbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3RDaGFydENvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInJvdENoYXJ0Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3JvdGF0aW9uQ2hhcnRPcHRpb25zTW9kYWwsICNjaGFydElkZW50aWZpZXJEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICBpZiAoJHJhZGlvT3B0aW9uID09PSBcIlllc1wiKSB7XG4gICAgICAgICAgICAgICAgcm90Q2hhcnRDb25maWcuaWRlbnRpZmllck51bWJlciA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgcm90Q2hhcnRDb25maWcuaWRlbnRpZmllck51bWJlciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwicm90Q2hhcnRDb25maWdcIiwgcm90Q2hhcnRDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gY2hhbmdlIGZvbnQgc2l6ZT8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNyb3RhdGlvbkNoYXJ0T3B0aW9uc01vZGFsXCIpLm9uKCdjbGljaycsICcjY2hhbmdlRm9udFNpemVEaXYgOnJhZGlvJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvdENoYXJ0Q29uZmlnID0gUUFWLmdldFN0YXRlKFwicm90Q2hhcnRDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjY2hhbmdlRm9udFNpemVEaXYgOnJhZGlvLCAjY2hhbmdlRm9udFNpemVEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICByb3RDaGFydENvbmZpZy5jaGFuZ2VGb250U2l6ZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgcm90Q2hhcnRDb25maWcuY2hhbmdlRm9udFNpemUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInJvdENoYXJ0Q29uZmlnXCIsIHJvdENoYXJ0Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGNoYXJ0IGZvbnQgc2l6ZSBhZGp1c3RtZW50IGlucHV0IGJveFxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjcm90YXRpb25DaGFydE9wdGlvbnNNb2RhbFwiKS5vbignaW5wdXQnLCAnI2NoYXJ0Rm9udFNpemVJbnB1dEJveCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3RDaGFydENvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInJvdENoYXJ0Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGN1c3RvbUZvbnRTaXplID0gJCgnI2NoYXJ0Rm9udFNpemVJbnB1dEJveCcpLnZhbCgpO1xuICAgICAgICAgICAgcm90Q2hhcnRDb25maWcuY3VzdG9tRm9udFNpemUgPSBjdXN0b21Gb250U2l6ZTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInJvdENoYXJ0Q29uZmlnXCIsIHJvdENoYXJ0Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8qXG4gICAgLy9cbiAgICAvLyAqKioqIFNFQ1RJT04gNSAqKioqICAoZmFjdG9yIGxvYWRpbmdzKVxuICAgIC8vXG4gICAgKi9cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2F1dG9mbGFnQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0ZXN0Rm9yU3BsaXQgPSBRQVYuZ2V0U3RhdGUoXCJoYXNTcGxpdEZhY3RvclwiKTtcbiAgICAgICAgICAgIGlmICh0ZXN0Rm9yU3BsaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgVklFVy5zaG93RGlzYWJsZWRGdW5jdGlvbnNBZnRlclNwbGl0TW9kYWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IGNvcHkgb2YgY3VycmVudCByb3RhdGlvbnMgc3RhdGUgbWF0cml4XG4gICAgICAgICAgICAgICAgdmFyIHJvdEZhY1N0YXRlQXJyYXkgPSBRQVYuZ2V0U3RhdGUoXCJyb3RGYWNTdGF0ZUFycmF5XCIpO1xuICAgICAgICAgICAgICAgIC8vIHByZXAgZm9yIGNoYXJ0XG4gICAgICAgICAgICAgICAgUk9UQS5jYWxjdWxhdGVDb21tdW5hbGl0aWVzKHJvdEZhY1N0YXRlQXJyYXkpO1xuICAgICAgICAgICAgICAgIC8qIGdldHMgYXJyYXkgZm9yIGZTaWcgdGVzdGluZyBmcm9tIExTIG9mIGNhbGN1bGF0ZUNvbW11bmFsaXRpZXMgLSBzZXRzIGZTaWdDcml0ZXJpb25SZXN1bHRzICAtLS0gYWxzbyBcImZsYWdcIiBwYXJhbWV0ZXIgY2F1c2VzIGRpc3BsYXkgb2Ygc2lnIGZhY3RvciBsb2FkaW5ncyBpbiBjdXJyZW50IGZhY29yIGxvYWRpbmdzIHRhYmxlICAqL1xuICAgICAgICAgICAgICAgIFJPVEEuY2FsY3VsYXRlZlNpZ0NyaXRlcmlvblZhbHVlcyhcImZsYWdcIik7XG4gICAgICAgICAgICAgICAgLy8gcmUtZHJhdyByb3RhdGlvbiB0YWJsZSB3aXRob3V0IGRlc3Ryb3lcbiAgICAgICAgICAgICAgICB2YXIgaXNSb3RhdGVkRmFjdG9yc1RhYmxlVXBkYXRlID0gXCJkZXN0cm95XCI7XG4gICAgICAgICAgICAgICAgTE9BRC5kcmF3Um90YXRlZEZhY3RvcnNUYWJsZTIoaXNSb3RhdGVkRmFjdG9yc1RhYmxlVXBkYXRlLCBcImZsYWdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cblxuICAgIC8vIFNQTElUIEJJUE9MQVIgRkFDVE9SIEJVVFRPTlxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc3BsaXRGYWN0b3JCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgVklFVy5zaG93U3BsaXRCaXBvbGFyRmFjdG9yTW9kYWwoKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGNsaWNrIGhhbmRsZXIgZm9yIHNlbGVjdCBmYWN0b3IgbG9hZGluZ3MgY2hlY2tib3hlc1xuICAgIC8vIHRvZG8gLSBjaGVjayB0byBzZWUgaWYgdGhpcyBpcyBuZWVkZWRcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjZmFjdG9yUm90YXRpb25UYWJsZTIgdGJvZHknKS5vbignY2xpY2snLCAndHInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSAkKCcjZmFjdG9yUm90YXRpb25UYWJsZTInKS5EYXRhVGFibGUoKTsgLy9cbiAgICAgICAgICAgIHRhYmxlXG4gICAgICAgICAgICAgICAgLnJvd3MoKVxuICAgICAgICAgICAgICAgIC5kYXRhKCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyBjb250cm9sIGZhY3RvciBsb2FkaW5ncyB0YWJsZSBiYWNrZ3JvdW5kIGhpZ2hsaWdodFxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjbG9hZGluZ3NSYWRpb1NlbGVjdDIgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgLy8gZGlzYWJsZSBpZiB0YWJsZSBoYXMgc3BsaXQgZmFjdG9yXG4gICAgICAgICAgICB2YXIgdGVzdEZvclNwbGl0ID0gUUFWLmdldFN0YXRlKFwiaGFzU3BsaXRGYWN0b3JcIik7XG4gICAgICAgICAgICBpZiAodGVzdEZvclNwbGl0ID4gMCkge1xuICAgICAgICAgICAgICAgIFZJRVcuc2hvd0Rpc2FibGVkRnVuY3Rpb25zQWZ0ZXJTcGxpdE1vZGFsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCIjbG9hZGluZ3NSYWRpb1NlbGVjdDIgLnJhZGlvSGlnaGxpZ2h0MlwiKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIC8vICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAvLyB0b2RvIC0gZmluZCBvdXQgaG93IHRvIHByZXZlbnQgbmVlZCBmb3IgdGFibGUgZGVzdHJveVxuXG4gICAgICAgICAgICAgICAgLy8ga2VlcCBmbGFncyAtIGdldCBjdXJyZW50IHRhYmxlIGRhdGEgaW5jbHVkaW5nIGZsYWdzIGFuZCByZWRyYXduXG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gJCgnI2ZhY3RvclJvdGF0aW9uVGFibGUyJykuRGF0YVRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoYXJ0RGF0YSA9IHRhYmxlLnJvd3MoKS5kYXRhKCk7XG4gICAgICAgICAgICAgICAgUUFWLmNvbG9yQnV0dG9uQ2hhcnREYXRhID0gY2hhcnREYXRhO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlzUm90YXRlZEZhY3RvcnNUYWJsZVVwZGF0ZSA9IFwiaGlnaGxpZ2h0ZXJcIjtcbiAgICAgICAgICAgICAgICB2YXIgc2hvdWxkRmxhZyA9IFwiZmxhZ1wiO1xuICAgICAgICAgICAgICAgIExPQUQuZHJhd1JvdGF0ZWRGYWN0b3JzVGFibGUyKGlzUm90YXRlZEZhY3RvcnNUYWJsZVVwZGF0ZSwgc2hvdWxkRmxhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyByZW9yZGVyIHRhYmxlIGJ5IHJlc3BvbmRlbnQgaWQgb3IgaGlnaGVzdCBsb2FkaW5nIGZhY3RvclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjbG9hZGluZ3NSYWRpb1NlbGVjdDEgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICQoJyNsb2FkaW5nc1JhZGlvU2VsZWN0MSBpbnB1dDpub3QoOmNoZWNrZWQpJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICQoJyNsb2FkaW5nc1JhZGlvU2VsZWN0MSAucmFkaW9IaWdobGlnaHQxJykucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIC8vICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICQoXCJsYWJlbFtmb3I9J1wiICsgJCh0aGlzKS5hdHRyKCdpZCcpICsgXCInXVwiKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgdmFyICRyYWRpb09wdGlvbiA9ICsoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSAkKCcjZmFjdG9yUm90YXRpb25UYWJsZTInKS5EYXRhVGFibGUoKTtcblxuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRhYmxlLm9yZGVyKFswLCAnYXNjJ10pLmRyYXcoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSAyKSB7XG4gICAgICAgICAgICAgICAgdGFibGUub3JkZXIoWzIsICdhc2MnXSkuZHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gcmVtb3ZlIGl0ZW1zIGZyb20gUHJvamVjdCBoaXN0b3J5IGxpc3QgYW5kIHVuZG8gcm90YXRpb25cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3JvdGF0aW9uSGlzdG9yeUxpc3RcIikub24oXCJjbGlja1wiLCBcImJ1dHRvblwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcyhcImRlbGV0ZUJ1dHRvblwiKSAmJiAkdGhpcy5oYXNDbGFzcyhcInZhcmltYXhDYWxsZWRcIikpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2ZhY3RvclZhcmltYXhCdXR0b25cIikucmVtb3ZlQ2xhc3MoXCJidXR0b25BY3Rpb25Db21wbGV0ZVwiKS5hZGRDbGFzcyhcImJsYWNrSG92ZXJcIikucHJvcCgndmFsdWUnLCAnQXBwbHkgVmFyaW1heCBSb3RhdGlvbicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIExPQUQudW5kb0ZhY3RvclJvdGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgJHRoaXMucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCR0aGlzLmhhc0NsYXNzKFwiZGVsZXRlU3BsaXRGYWN0b3JCdXR0b25cIikpIHtcbiAgICAgICAgICAgICAgICBMT0FELnVuZG9TcGxpdEZhY3RvclJvdGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgJHRoaXMucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCR0aGlzLmhhc0NsYXNzKFwiZGVsZXRlQnV0dG9uXCIpKSB7XG4gICAgICAgICAgICAgICAgTE9BRC51bmRvRmFjdG9yUm90YXRpb24oKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIElOVkVSVCBGQUNUT1IgQlVUVE9OXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNpbnZlcnRGYWN0b3JCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHJvdGF0aW9uSGlzdG9yeSA9ICQoXCIjcm90YXRpb25IaXN0b3J5TGlzdCBsaVwiKS50ZXh0KCk7XG4gICAgICAgICAgICBpZiAocm90YXRpb25IaXN0b3J5LmluZGV4T2YoJ3dhcyBzcGxpdCBpbnRvJykgPj0gMCkge1xuICAgICAgICAgICAgICAgIFZJRVcuc2hvd0Rpc2FibGVkRnVuY3Rpb25zQWZ0ZXJTcGxpdE1vZGFsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFZJRVcuc2hvd0ludmVydE1vZGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvKlxuICAgIC8vXG4gICAgLy8gKioqKiBTRUNUSU9OIDYgKioqKiBvdXRwdXRcbiAgICAvL1xuICAgICovXG5cbiAgICAvLyBwYWdlIHNldHVwIGFjdGlvbnMgZm9yIHBhZ2UgcmVsb2FkXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gaGlkZSBkb3dubG9hZCBidXR0b24gdW50aWwgYWZ0ZXIgcHJlbGltaW5hcnkgcmVzdWx0cyBhcmUgZGlzcGxheWVkXG4gICAgICAgICQoXCIjZG93bmxvYWRSZXN1bHRzQnV0dG9uXCIpLmhpZGUoKTtcbiAgICAgICAgJChcIiNkb3dubG9hZENzdlJlc3VsdHNCdXR0b25cIikuaGlkZSgpO1xuICAgICAgICAkKFwiI2Rpc3BsYXlRdWlja1Jlc3VsdHNCdXR0b25cIikuaGlkZSgpO1xuICAgICAgICAkKFwiI2ZhY3RvclZpek9wdGlvbnNEaXZcIikuaGlkZSgpO1xuXG4gICAgICAgIC8vIHRyYWNrZXIgZm9yIHJlc3VsdHMgZG93bmxvYWQgLyBkaXNwbGF5IGJ1dHRvbnNcbiAgICAgICAgUUFWLnNldFN0YXRlKFwib3V0cHV0Q29tcGxldGVcIiwgXCJmYWxzZVwiKTtcbiAgICB9KSgpO1xuXG4gICAgLy8gIGNoYW5nZSB0aGUgdmFsdWUgb2YgY2hlY2tib3hlcyBvbiBmYWN0b3Igcm90YXRpb24gdGFibGUgd2hlbiBjbGlja2VkXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2ZhY3RvclJvdGF0aW9uVGFibGUyJykub24oJ2NsaWNrJywgJ3RkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG15VGFibGUgPSAkKCcjZmFjdG9yUm90YXRpb25UYWJsZTInKS5EYXRhVGFibGUoKTtcbiAgICAgICAgICAgIGlmIChteVRhYmxlLmNlbGwoJCh0aGlzKSkuZGF0YSgpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgbXlUYWJsZS5jZWxsKCQodGhpcykpLmRhdGEoJ3RydWUnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobXlUYWJsZS5jZWxsKCQodGhpcykpLmRhdGEoKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgbXlUYWJsZS5jZWxsKCQodGhpcykpLmRhdGEoJ2ZhbHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyBkaXNwbGF5IHF1aWNrIHJlc3VsdHMgYnV0dG9uIGV2ZW50IGxpc3RlbmVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2Rpc3BsYXlRdWlja1Jlc3VsdHNCdXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBwdWxsIHRoZSBzdGF0ZSBkYXRhIChzZWxlY3RlZCBmYWN0b3IgbG9hZGluZ3MgLSBjaGVja2JveGVzKSBmcm9tIHRhYmxlXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGxvb3BMZW4xID0gUUFWLmdldFN0YXRlKFwicWF2UmVzcG9uZGVudE5hbWVzXCIpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBkYXRhID0gJCgnI2ZhY3RvclJvdGF0aW9uVGFibGUyJykuRGF0YVRhYmxlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvb3BMZW4xOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YTIgPSBkYXRhLnJvdyhpKS5kYXRhKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGRhdGEyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInJlc3VsdHNcIiwgcmVzdWx0cyk7XG5cbiAgICAgICAgICAgIC8vIGdldCBzZWxlY3RlZCBmYWN0b3JzIGluZm9ybWF0aW9uXG4gICAgICAgICAgICBQUkVMSU1PVVQuZ2V0RmFjdG9yc0ZvckFuYWx5c2lzKCk7XG5cbiAgICAgICAgICAgIC8vIGJlZ2lucyBwcmVsaW1pbmFyeSByZXN1bHRzIGRpc3BsYXkgZnVuY3Rpb24gY2FzY2FkZVxuICAgICAgICAgICAgdmFyIGNhbk91dHB1dCA9IFBSRUxJTU9VVC5wdWxsRmxhZ2dlZEZhY3RvckxvYWRpbmdzKCk7XG5cbiAgICAgICAgICAgIGlmIChjYW5PdXRwdXQgIT09IFwiZmFsc2VcIikge1xuICAgICAgICAgICAgICAgIE9VVFBVVC5nZW5lcmF0ZU91dHB1dCgpO1xuICAgICAgICAgICAgICAgIFZJRVcuY2xlYXJQcmV2aW91c1RhYmxlcygpO1xuICAgICAgICAgICAgICAgIC8vIENPUlIuZHJhd1Jhd1NvcnRzUmFkdml6KCk7XG4gICAgICAgICAgICAgICAgUFJFTElNT1VULnNob3dQcmVsaW1pbmFyeU91dHB1dDEoKTtcbiAgICAgICAgICAgICAgICAkKFwiI2Rvd25sb2FkUmVzdWx0c0J1dHRvblwiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJChcIiNkb3dubG9hZENzdlJlc3VsdHNCdXR0b25cIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoXCIjY2xlYXJTdG9yYWdlQnV0dG9uXCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHN0YXJ0IHRoZSBvdXRwdXQgY2FsY3VsYXRpb25zIGFuZCBmaWxlIHdyaXRlIGZ1bmN0aW9ucyBjYXNjYWRlXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNkb3dubG9hZFJlc3VsdHNCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBPVVRQVVQuZG93bmxvYWRPdXRwdXQoKTtcbiAgICAgICAgICAgIE9VVFBVVC5kb3dubG9hZEV4Y2VsT3V0cHV0RmlsZSgpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNkb3dubG9hZENzdlJlc3VsdHNCdXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBPVVRQVVQuZG93bmxvYWRPdXRwdXQoKTtcbiAgICAgICAgICAgIE9VVFBVVC5kb3dubG9hZENzdk91dHB1dEZpbGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc2VsZWN0RmFjdG9yc0Zvck91dHB1dEJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFBSRUxJTU9VVC5hcHBlbmRGYWN0b3JTZWxlY3Rpb25DaGVja2JveGVzKCk7XG4gICAgICAgICAgICAkKFwiI2Rpc3BsYXlRdWlja1Jlc3VsdHNCdXR0b25cIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiNmYWN0b3JWaXpPcHRpb25zRGl2XCIpLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjY2xlYXJTdG9yYWdlQnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgVklFVy5zaG93RGVsZXRlS2VucURhdGEoKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNkZWxldGVMb2NhbERhdGFNb2RhbCcpLm9uKFwiY2xpY2tcIiwgJyNkZWxldGVMb2NhbERhdGFDb25maXJtQnV0dG9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xuICAgICAgICAgICAgVklFVy5zaG93bG9jYWxEYXRhRGVsZXRlU3VjY2Vzc01vZGFsKCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNkZWxldGVMb2NhbERhdGFNb2RhbCcpLm9uKFwiY2xpY2tcIiwgJy5idXR0b24tY2FuY2VsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnI2RlbGV0ZUxvY2FsRGF0YU1vZGFsJykuaXppTW9kYWwoJ2Nsb3NlJyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG4gICAgLypcbiAgICAgKipcbiAgICAgKiogICAgVmlzdWFsaXphdGlvbnMgUGFuZWwgZXZlbnQgbGlzdGVuZXJzXG4gICAgICoqXG4gICAgICovXG4gICAgLy8gc2hvdWxkIGluY2x1ZGUgbGVnZW5kPyAtIGV2ZW50IGhhbmRsZXJcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2luY2x1ZGVMZWdlbmREaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjaW5jbHVkZUxlZ2VuZERpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdmFyICRyYWRpb09wdGlvbiA9ICgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmICgkcmFkaW9PcHRpb24gPT09IFwiWWVzXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkSGF2ZUxlZ2VuZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZEhhdmVMZWdlbmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gc2hvdWxkIHByZXBlbmQgc3RhdGVtZW50IG51bWJlcnM/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjcHJlcGVuZFN0YXRlTm9EaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjcHJlcGVuZFN0YXRlTm9EaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCJsYWJlbFtmb3I9J1wiICsgJCh0aGlzKS5hdHRyKCdpZCcpICsgXCInXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIHZhciAkcmFkaW9PcHRpb24gPSAoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICBpZiAoJHJhZGlvT3B0aW9uID09PSBcIlllc1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFByZXBlbmRTdGF0ZU5vID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkUHJlcGVuZFN0YXRlTm8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gc2hvdWxkIHNob3cgb25seSBzdGF0ZW1lbnQgbnVtYmVycz8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNzaG93T25seVN0YXRlTm9EaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjc2hvd09ubHlTdGF0ZU5vRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTaG93T25seVN0YXRlTm8gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkcmFkaW9PcHRpb24gPT09IFwiTm9cIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTaG93T25seVN0YXRlTm8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gc2hvdWxkIHNob3cgY3VzdG9tIGZhY3RvciBuYW1lcz8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNhZGRDdXN0b21GYWN0b3JOYW1lRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI2FkZEN1c3RvbUZhY3Rvck5hbWVEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCJsYWJlbFtmb3I9J1wiICsgJCh0aGlzKS5hdHRyKCdpZCcpICsgXCInXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIHZhciAkcmFkaW9PcHRpb24gPSAoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICBpZiAoJHJhZGlvT3B0aW9uID09PSBcIlllc1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLmFkZEN1c3RvbUZhY3Rvck5hbWUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkcmFkaW9PcHRpb24gPT09IFwiTm9cIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5hZGRDdXN0b21GYWN0b3JOYW1lID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIGdyYWIgY3VzdG9tIGZhY3RvciBuYW1lcyBmcm9tIGlucHV0XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2N1c3RvbUZhY3Rvck5hbWVJbnB1dEJveCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICB2YXIgY3VzdG9tRmFjdG9yTmFtZXMgPSAkKCcjY3VzdG9tRmFjdG9yTmFtZUlucHV0Qm94JykudmFsKCk7XG4gICAgICAgICAgICB2aXpDb25maWcuY3VzdG9tRmFjdG9yTmFtZXMgPSBjdXN0b21GYWN0b3JOYW1lcy5zcGxpdChcIixcIik7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBzZXQgQ2FyZCBIZWlnaHQ/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc2V0Q2FyZEhlaWdodERpdiA6cmFkaW9cIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZpekNvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInZpekNvbmZpZ1wiKSB8fCB7fTtcbiAgICAgICAgICAgICQoJyNzZXRDYXJkSGVpZ2h0RGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTZXRDYXJkSGVpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2V0Q2FyZEhlaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidml6Q29uZmlnXCIsIHZpekNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyBzaG91bGQgc2V0IGNhcmQgd2lkdGg/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc2V0Q2FyZFdpZHRoRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3NldENhcmRXaWR0aERpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdmFyICRyYWRpb09wdGlvbiA9ICgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmICgkcmFkaW9PcHRpb24gPT09IFwiWWVzXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2V0Q2FyZFdpZHRoID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2V0Q2FyZFdpZHRoID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBzZXQgZm9udCBzaXplPyAtIGV2ZW50IGhhbmRsZXJcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3NldEZvbnRTaXplRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3NldEZvbnRTaXplRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTZXRGb250U2l6ZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFNldEZvbnRTaXplID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBzZXQgZm9udCBzaXplPyAtIGV2ZW50IGhhbmRsZXJcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3NldFN0YXRlbWVudFdpZHRoRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3NldFN0YXRlbWVudFdpZHRoRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTZXRTdGF0ZW1lbnRXaWR0aCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFNldFN0YXRlbWVudFdpZHRoID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBzZXQgbGluZSBzcGFjaW5nPyAtIGV2ZW50IGhhbmRsZXJcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2FkanVzdExpbmVTcGFjaW5nRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI2FkanVzdExpbmVTcGFjaW5nRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTZXRMaW5lU3BhY2luZyA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFNldExpbmVTcGFjaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCB0cmltIHN0YXRlbWVudHM/IC0gZXZlbnQgaGFuZGxlciAgdHJpbVN0YXRlbWVudHNEaXZcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3RyaW1TdGF0ZW1lbnRzRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3RyaW1TdGF0ZW1lbnRzRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRUcmltU3RhdGVtZW50cyA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFRyaW1TdGF0ZW1lbnRzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIEFzaWFuIExhbmd1YWdlIHNldCB3aWR0aD8gLSBldmVudCBoYW5kbGVyICB0cmltU3RhdGVtZW50c0RpdlxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc2V0QXNpYW5TdGF0ZW1lbnRzTGVuZ3RoRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3NldEFzaWFuU3RhdGVtZW50c0xlbmd0aERpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdmFyICRyYWRpb09wdGlvbiA9ICgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmICgkcmFkaW9PcHRpb24gPT09IFwiWWVzXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2V0V2lkdGhGb3JBc2lhbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLmFzaWFuU3RhdG1lbnRMZW5ndGggPSAxMjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2V0V2lkdGhGb3JBc2lhbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidml6Q29uZmlnXCIsIHZpekNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyBpbmRpY2F0ZSBzaWduaWZpY2FuY2U/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjc2hvd1NpZ25pZmljYW5jZVN5bWJvbHNEaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjc2hvd1NpZ25pZmljYW5jZVN5bWJvbHNEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCJsYWJlbFtmb3I9J1wiICsgJCh0aGlzKS5hdHRyKCdpZCcpICsgXCInXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIHZhciAkcmFkaW9PcHRpb24gPSAoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICBpZiAoJHJhZGlvT3B0aW9uID09PSBcIlllc1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZEluZGljYXRlRGlzdGluZ3Vpc2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICQoJyN1c2VVbmljb2RlWWVzJykudHJpZ2dlcihcImNsaWNrXCIpO1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRVc2VVbmljb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkSW5kaWNhdGVEaXN0aW5ndWlzaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICQoJyN1c2VVbmljb2RlU3ltYm9sc0RpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAkKCcjenNjb3JlQXJyb3dEaXJlY3Rpb25EaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICQoJyNzZXRTeW1ib2xGb250U2l6ZURpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCB1c2UgVW5pY29kZSBzeW1ib2xzPyAtIGV2ZW50IGhhbmRsZXIgICN1c2VVbmljb2RlU3ltYm9sc0RpdlxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdXNlVW5pY29kZVN5bWJvbHNEaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjdXNlVW5pY29kZVN5bWJvbHNEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIHZhciAkcmFkaW9PcHRpb24gPSAoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICBpZiAoJHJhZGlvT3B0aW9uID09PSBcInVuaWNvZGVcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRVc2VVbmljb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcImFzY2lpXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkVXNlVW5pY29kZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidml6Q29uZmlnXCIsIHZpekNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAvLyBzaG91bGQgdXNlIFVuaWNvZGUgc3ltYm9scz8gLSBldmVudCBoYW5kbGVyICAjdXNlVW5pY29kZVN5bWJvbHNEaXZcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3NldFN5bWJvbEZvbnRTaXplRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI3NldFN5bWJvbEZvbnRTaXplRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTZXRTeW1ib2xGb250U2l6ZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFNldFN5bWJvbEZvbnRTaXplID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBzaG93IHpzY29yZSBmYWN0b3IgY29tcGFyaXNvbiBhcnJvd3M/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjenNjb3JlQXJyb3dEaXJlY3Rpb25EaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjenNjb3JlQXJyb3dEaXJlY3Rpb25EaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCJsYWJlbFtmb3I9J1wiICsgJCh0aGlzKS5hdHRyKCdpZCcpICsgXCInXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIHZhciAkcmFkaW9PcHRpb24gPSAoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICBpZiAoJHJhZGlvT3B0aW9uID09PSBcIlllc1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFNob3dac2NvcmVBcnJvd3MgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkcmFkaW9PcHRpb24gPT09IFwiTm9cIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRTaG93WnNjb3JlQXJyb3dzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBzaG93IHpzY29yZSBmYWN0b3IgY29tcGFyaXNvbiBhcnJvd3M/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjZGlzcGxheUNvbnNlbnN1c1N0YXRlbWVudHNEaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjZGlzcGxheUNvbnNlbnN1c1N0YXRlbWVudHNEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCJsYWJlbFtmb3I9J1wiICsgJCh0aGlzKS5hdHRyKCdpZCcpICsgXCInXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIHZhciAkcmFkaW9PcHRpb24gPSAoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICBpZiAoJHJhZGlvT3B0aW9uID09PSBcIlllc1wiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZEluZGljYXRlQ29uc2Vuc3VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKCcjc2V0Q29uc2Vuc3VzU3ltYm9sTm8nKS50cmlnZ2VyKFwiY2xpY2tcIik7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFVzZVRvSW5kaWNhdGVDb25zZW5zdXMgPSBcInN0cmlwZVwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkcmFkaW9PcHRpb24gPT09IFwiTm9cIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRJbmRpY2F0ZUNvbnNlbnN1cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICQoJyNzZXRDb25zZW5zdXNTeW1ib2xEaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBjb2xvciB2cyBzdHJpcGUgZm9yIGNvbnNlbnN1cz8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNzZXRDb25zZW5zdXNTeW1ib2xEaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjc2V0Q29uc2Vuc3VzU3ltYm9sRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJDT0xPUlwiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFVzZVRvSW5kaWNhdGVDb25zZW5zdXMgPSBcImNvbG9yXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJTVFJJUEVcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRVc2VUb0luZGljYXRlQ29uc2Vuc3VzID0gXCJzdHJpcGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgLy8gc2hvdWxkIHNob3cgbWF0Y2hpbmcgY291bnRzPyAtIGV2ZW50IGhhbmRsZXJcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3VzZU1hdGNoQ291bnREaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjdXNlTWF0Y2hDb3VudERpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdmFyICRyYWRpb09wdGlvbiA9ICgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmICgkcmFkaW9PcHRpb24gPT09IFwiWWVzXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2hvd01hdGNoQ291bnRzID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2hvd01hdGNoQ291bnRzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBzaG93IGJhY2tncm91bmQgY29sb3I/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjaW5kaWNhdGVNYXRjaENvdW50QXNCYWNrZ3JvdW5kRGl2IDpyYWRpb1wiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgJCgnI2luZGljYXRlTWF0Y2hDb3VudEFzQmFja2dyb3VuZERpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdmFyICRyYWRpb09wdGlvbiA9ICgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmICgkcmFkaW9PcHRpb24gPT09IFwiWWVzXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2hvd0JhY2tncm91bmRDb2xvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgJCgnI3NldE1hdGNoQ291bnRDYXV0aW9uSW5kaWNhdG9yTm8nKS50cmlnZ2VyKFwiY2xpY2tcIik7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFVzZVRvSW5kaWNhdGVNYXRjaENhdXRpb24gPSBcInN0cmlwZVwiO1xuICAgICAgICAgICAgICAgICQoJyNzZXRNYXRjaENvbnNlbnN1c092ZXJsYXBJbmRpY2F0b3JObycpLnRyaWdnZXIoXCJjbGlja1wiKTtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkVXNlVG9JbmRpY2F0ZU92ZXJsYXAgPSBcImNyb3NzaGF0Y2hcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkU2hvd0JhY2tncm91bmRDb2xvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICQoJyNzZXRNYXRjaENvdW50Q2F1dGlvbkluZGljYXRvckRpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAkKCcjc2V0TWF0Y2hDb25zZW5zdXNPdmVybGFwSW5kaWNhdG9yRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdml6Q29uZmlnLmJhY2tncm91bmRDb2xvckN1dG9mZiA9IDA7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBjb2xvciB2cyBzdHJpcGUgZm9yIGNvbnNlbnN1cz8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNzZXRNYXRjaENvdW50Q2F1dGlvbkluZGljYXRvckRpdiA6cmFkaW9cIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZpekNvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInZpekNvbmZpZ1wiKSB8fCB7fTtcbiAgICAgICAgICAgICQoJyNzZXRNYXRjaENvdW50Q2F1dGlvbkluZGljYXRvckRpdiAucmFkaW9IaWdobGlnaHQyJykucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICQoXCJsYWJlbFtmb3I9J1wiICsgJCh0aGlzKS5hdHRyKCdpZCcpICsgXCInXVwiKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgdmFyICRyYWRpb09wdGlvbiA9ICgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgIGlmICgkcmFkaW9PcHRpb24gPT09IFwiQ09MT1JcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRVc2VUb0luZGljYXRlTWF0Y2hDYXV0aW9uID0gXCJjb2xvclwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkcmFkaW9PcHRpb24gPT09IFwiU1RSSVBFXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkVXNlVG9JbmRpY2F0ZU1hdGNoQ2F1dGlvbiA9IFwic3RyaXBlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBjb2xvciB2cyBzdHJpcGUgZm9yIGNvbnNlbnN1cz8gLSBldmVudCBoYW5kbGVyXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNzZXRNYXRjaENvbnNlbnN1c092ZXJsYXBJbmRpY2F0b3JEaXYgOnJhZGlvXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICAkKCcjc2V0TWF0Y2hDb25zZW5zdXNPdmVybGFwSW5kaWNhdG9yRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgJChcImxhYmVsW2Zvcj0nXCIgKyAkKHRoaXMpLmF0dHIoJ2lkJykgKyBcIiddXCIpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJDT0xPUlwiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFVzZVRvSW5kaWNhdGVPdmVybGFwID0gXCJjb2xvclwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkcmFkaW9PcHRpb24gPT09IFwiQ1JPU1NIQVRDSFwiKSB7XG4gICAgICAgICAgICAgICAgdml6Q29uZmlnLnNob3VsZFVzZVRvSW5kaWNhdGVPdmVybGFwID0gXCJjcm9zc2hhdGNoXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIC8vIHNob3VsZCBhZGQgY3VzdG9tIG5hbWU/IC0gZXZlbnQgaGFuZGxlclxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjYWRkQ3VzdG9tTmFtZURpdiA6cmFkaW9cIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZpekNvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInZpekNvbmZpZ1wiKSB8fCB7fTtcbiAgICAgICAgICAgICQoJyNhZGRDdXN0b21OYW1lRGl2IC5yYWRpb0hpZ2hsaWdodDInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB2YXIgJHJhZGlvT3B0aW9uID0gKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYgKCRyYWRpb09wdGlvbiA9PT0gXCJZZXNcIikge1xuICAgICAgICAgICAgICAgIHZpekNvbmZpZy5zaG91bGRBZGRDdXN0b21OYW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJhZGlvT3B0aW9uID09PSBcIk5vXCIpIHtcbiAgICAgICAgICAgICAgICB2aXpDb25maWcuc2hvdWxkQWRkQ3VzdG9tTmFtZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidml6Q29uZmlnXCIsIHZpekNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2N1c3RvbU5hbWVMb2NhdGlvbkRpdiA6cmFkaW9cIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZpekNvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInZpekNvbmZpZ1wiKSB8fCB7fTtcbiAgICAgICAgICAgICQoJyNjdXN0b21OYW1lTG9jYXRpb25EaXYgLnJhZGlvSGlnaGxpZ2h0MicpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAkKFwibGFiZWxbZm9yPSdcIiArICQodGhpcykuYXR0cignaWQnKSArIFwiJ11cIikuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIHZhciAkcmFkaW9PcHRpb24gPSAoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICB2aXpDb25maWcuY3VzdG9tTmFtZUxvY2F0aW9uID0gJHJhZGlvT3B0aW9uO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidml6Q29uZmlnXCIsIHZpekNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3Nob3dEaXNwbGF5UGFuZWxCdXR0b25cIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gUUFWLmdldFN0YXRlKFwibGFuZ3VhZ2VcIik7XG4gICAgICAgICAgICB2YXIgaGlkZSA9IHJlc291cmNlc1tsYW5ndWFnZV0udHJhbnNsYXRpb24uSElERTtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gcmVzb3VyY2VzW2xhbmd1YWdlXS50cmFuc2xhdGlvbi5WSUVXO1xuICAgICAgICAgICAgJCh0aGlzKS52YWwoZnVuY3Rpb24gKGksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSBoaWRlID8gdmlldyA6IGhpZGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoXCIjdml6UGFuZWxIaWRlQ29udGFpbmVyXCIpLnRvZ2dsZSgpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3VwZGF0ZURpc3BsYXlCdXR0b25cIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgVklFVy5jbGVhclByZXZpb3VzVGFibGVzKCk7XG4gICAgICAgICAgICBQUkVMSU1PVVQuc2hvd1ByZWxpbWluYXJ5T3V0cHV0MSgpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuICAgIC8vXG4gICAgLy8gVmlzdWFsaXphdGlvbiBDb250cm9sIFBhbmVsIE9uLWNoYW5nZSBldmVudCBsaXN0ZW5lcnNcbiAgICAvL1xuXG4gICAgLy8gY2FwdHVyZSBjYXJkIGhlaWdodCBpbnB1dCBpbiBWaXogcGFuZWwgICAjY2FyZEhlaWdodElucHV0Qm94XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2NhcmRIZWlnaHRJbnB1dEJveCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICB2YXIgY2FyZEhlaWdodCA9ICQoJyNjYXJkSGVpZ2h0SW5wdXRCb3gnKS52YWwoKTtcbiAgICAgICAgICAgIFVUSUwuY2hlY2tJZlZhbHVlSXNOdW1iZXIoY2FyZEhlaWdodCwgXCJjYXJkSGVpZ2h0SW5wdXRCb3hcIik7XG4gICAgICAgICAgICBpZiAoY2FyZEhlaWdodCA+IDUwMCkge1xuICAgICAgICAgICAgICAgIGNhcmRIZWlnaHQgPSA1MDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhcmRIZWlnaHQgPCA1KSB7XG4gICAgICAgICAgICAgICAgY2FyZEhlaWdodCA9IDU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aXpDb25maWcuY2FyZEhlaWdodCA9IGNhcmRIZWlnaHQ7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNjYXJkV2lkdGhJbnB1dEJveCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICB2YXIgY2FyZFdpZHRoID0gJCgnI2NhcmRXaWR0aElucHV0Qm94JykudmFsKCk7XG4gICAgICAgICAgICBVVElMLmNoZWNrSWZWYWx1ZUlzTnVtYmVyKGNhcmRXaWR0aCwgXCJjYXJkV2lkdGhJbnB1dEJveFwiKTtcbiAgICAgICAgICAgIGlmIChjYXJkV2lkdGggPiA1MDApIHtcbiAgICAgICAgICAgICAgICBjYXJkV2lkdGggPSA1MDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhcmRXaWR0aCA8IDUpIHtcbiAgICAgICAgICAgICAgICBjYXJkV2lkdGggPSA1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdml6Q29uZmlnLmNhcmRXaWR0aCA9IGNhcmRXaWR0aDtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2ZvbnRTaXplSW5wdXRCb3gnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gJCgnI2ZvbnRTaXplSW5wdXRCb3gnKS52YWwoKTtcbiAgICAgICAgICAgIFVUSUwuY2hlY2tJZlZhbHVlSXNOdW1iZXIoZm9udFNpemUsIFwiZm9udFNpemVJbnB1dEJveFwiKTtcbiAgICAgICAgICAgIGlmIChmb250U2l6ZSA+IDE4MCkge1xuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gMTgwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmb250U2l6ZSA8IDQpIHtcbiAgICAgICAgICAgICAgICBmb250U2l6ZSA9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aXpDb25maWcuZm9udFNpemUgPSBmb250U2l6ZTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI3N0YXRlbWVudFdpZHRoSW5wdXRCb3gnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIHN0YXRlbWVudFdpZHRoID0gJCgnI3N0YXRlbWVudFdpZHRoSW5wdXRCb3gnKS52YWwoKTtcbiAgICAgICAgICAgIFVUSUwuY2hlY2tJZlZhbHVlSXNOdW1iZXIoc3RhdGVtZW50V2lkdGgsIFwic3RhdGVtZW50V2lkdGhJbnB1dEJveFwiKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZW1lbnRXaWR0aCA+IDE4MCkge1xuICAgICAgICAgICAgICAgIHN0YXRlbWVudFdpZHRoID0gMTgwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZW1lbnRXaWR0aCA8IC0xODApIHtcbiAgICAgICAgICAgICAgICBzdGF0ZW1lbnRXaWR0aCA9IC0xODA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aXpDb25maWcuc3RhdGVtZW50V2lkdGggPSBzdGF0ZW1lbnRXaWR0aDtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2xpbmVTcGFjaW5nSW5wdXRCb3gnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGxpbmVTcGFjaW5nID0gJCgnI2xpbmVTcGFjaW5nSW5wdXRCb3gnKS52YWwoKTtcbiAgICAgICAgICAgIFVUSUwuY2hlY2tJZlZhbHVlSXNOdW1iZXIobGluZVNwYWNpbmcsIFwibGluZVNwYWNpbmdJbnB1dEJveFwiKTtcbiAgICAgICAgICAgIGlmIChsaW5lU3BhY2luZyA+IDUwMCkge1xuICAgICAgICAgICAgICAgIGxpbmVTcGFjaW5nID0gNTAwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lU3BhY2luZyA8IDQpIHtcbiAgICAgICAgICAgICAgICBsaW5lU3BhY2luZyA9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aXpDb25maWcubGluZVNwYWNpbmcgPSBsaW5lU3BhY2luZztcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI3RyaW1TdGF0ZW1lbnRzSW5wdXRCb3gnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIHRyaW1TdGF0ZW1lbnRTaXplID0gJCgnI3RyaW1TdGF0ZW1lbnRzSW5wdXRCb3gnKS52YWwoKTtcbiAgICAgICAgICAgIFVUSUwuY2hlY2tJZlZhbHVlSXNOdW1iZXIodHJpbVN0YXRlbWVudFNpemUsIFwidHJpbVN0YXRlbWVudHNJbnB1dEJveFwiKTtcbiAgICAgICAgICAgIGlmICh0cmltU3RhdGVtZW50U2l6ZSA+IDMwMDApIHtcbiAgICAgICAgICAgICAgICB0cmltU3RhdGVtZW50U2l6ZSA9IDMwMDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaW1TdGF0ZW1lbnRTaXplIDwgMSkge1xuICAgICAgICAgICAgICAgIHRyaW1TdGF0ZW1lbnRTaXplID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpekNvbmZpZy50cmltU3RhdGVtZW50U2l6ZSA9IHRyaW1TdGF0ZW1lbnRTaXplO1xuICAgICAgICAgICAgUUFWLnNldFN0YXRlKFwidml6Q29uZmlnXCIsIHZpekNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjc2V0QXNpYW5MZW5ndGhJbnB1dEJveCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aXpDb25maWcgPSBRQVYuZ2V0U3RhdGUoXCJ2aXpDb25maWdcIikgfHwge307XG4gICAgICAgICAgICB2YXIgYXNpYW5TdGF0bWVudExlbmd0aCA9ICQoJyNzZXRBc2lhbkxlbmd0aElucHV0Qm94JykudmFsKCk7XG4gICAgICAgICAgICBVVElMLmNoZWNrSWZWYWx1ZUlzTnVtYmVyKGFzaWFuU3RhdG1lbnRMZW5ndGgsIFwic2V0QXNpYW5MZW5ndGhJbnB1dEJveFwiKTtcbiAgICAgICAgICAgIGlmIChhc2lhblN0YXRtZW50TGVuZ3RoID4gMzAwKSB7XG4gICAgICAgICAgICAgICAgYXNpYW5TdGF0bWVudExlbmd0aCA9IDMwMDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNpYW5TdGF0bWVudExlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICBhc2lhblN0YXRtZW50TGVuZ3RoID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpekNvbmZpZy5hc2lhblN0YXRtZW50TGVuZ3RoID0gYXNpYW5TdGF0bWVudExlbmd0aDtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI3N5bWJvbEZvbnRTaXplSW5wdXRCb3gnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIHNpZ1N5bWJvbEZvbnRTaXplID0gJCgnI3N5bWJvbEZvbnRTaXplSW5wdXRCb3gnKS52YWwoKTtcbiAgICAgICAgICAgIFVUSUwuY2hlY2tJZlZhbHVlSXNOdW1iZXIoc2lnU3ltYm9sRm9udFNpemUsIFwic3ltYm9sRm9udFNpemVJbnB1dEJveFwiKTtcbiAgICAgICAgICAgIGlmIChzaWdTeW1ib2xGb250U2l6ZSA+IDgwKSB7XG4gICAgICAgICAgICAgICAgc2lnU3ltYm9sRm9udFNpemUgPSA4MDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2lnU3ltYm9sRm9udFNpemUgPCAyKSB7XG4gICAgICAgICAgICAgICAgc2lnU3ltYm9sRm9udFNpemUgPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdml6Q29uZmlnLnNpZ1N5bWJvbEZvbnRTaXplID0gc2lnU3ltYm9sRm9udFNpemU7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdml6UGFuZWxIaWRlQ29udGFpbmVyXCIpLm9uKCdjaGFuZ2UnLCAnaW5wdXRbdHlwZT1jb2xvcl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGhleENvZGUyID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIHZpekNvbmZpZ1skKHRoaXMpLmF0dHIoJ25hbWUnKV0gPSBoZXhDb2RlMjtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2JhY2tncm91bmRDb2xvckN1dG9mZklucHV0Qm94Jykub24oJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZpekNvbmZpZyA9IFFBVi5nZXRTdGF0ZShcInZpekNvbmZpZ1wiKSB8fCB7fTtcbiAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3JDdXRvZmYgPSAkKCcjYmFja2dyb3VuZENvbG9yQ3V0b2ZmSW5wdXRCb3gnKS52YWwoKTtcbiAgICAgICAgICAgIFVUSUwuY2hlY2tJZlZhbHVlSXNOdW1iZXIoYmFja2dyb3VuZENvbG9yQ3V0b2ZmLCBcImJhY2tncm91bmRDb2xvckN1dG9mZklucHV0Qm94XCIpO1xuICAgICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvckN1dG9mZiA+PSAxMDApIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JDdXRvZmYgPSA5OTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpekNvbmZpZy5iYWNrZ3JvdW5kQ29sb3JDdXRvZmYgPSBiYWNrZ3JvdW5kQ29sb3JDdXRvZmY7XG4gICAgICAgICAgICBRQVYuc2V0U3RhdGUoXCJ2aXpDb25maWdcIiwgdml6Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNjdXN0b21OYW1lSW5wdXRCb3gnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdml6Q29uZmlnID0gUUFWLmdldFN0YXRlKFwidml6Q29uZmlnXCIpIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGN1c3RvbU5hbWUgPSAkKCcjY3VzdG9tTmFtZUlucHV0Qm94JykudmFsKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXN0b21OYW1lKTtcbiAgICAgICAgICAgIHZpekNvbmZpZy5jdXN0b21OYW1lID0gY3VzdG9tTmFtZTtcbiAgICAgICAgICAgIFFBVi5zZXRTdGF0ZShcInZpekNvbmZpZ1wiLCB2aXpDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9KSgpO1xuXG5cbn0od2luZG93LkNPTlRST0xFUlMgPSB3aW5kb3cuQ09OVFJPTEVSUyB8fCB7fSwgUUFWKSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvQ09OVFJPTEVSUy5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDE2Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9')}]);