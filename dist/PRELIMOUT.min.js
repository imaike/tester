!function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}({11:function(t,e){!function(t,e,a){"use strict";function r(){for(var t=e.getState("userSelectedFactors"),a=e.getState("language"),r=resources[a].translation["Flagged q - sort weights"],n=resources[a].translation["Flagged q-sort correlations"],o=resources[a].translation["Z-scores, sort values, raw sorts"],s=resources[a].translation["Statement Number"],l=resources[a].translation.Statement,i=resources[a].translation["Z-score"],c=resources[a].translation["Sort Values"],u=resources[a].translation.Weight,d=e.getState("factorWeightFactorArrayHolder"),h=e.getState("miniCorrelationArrayHolder"),f=e.getState("synFactorArray1Holder"),g=0;g<t.length;g++){var p=g+1,v=_.capitalize(t[g]);$("#factorTables").append('<div class="resultsLabel1"><h4>'+v+" - "+r+'</h4></div><table id="factorWeightResults'+p+'" class="display compact nowrap cell-border stripe"></table>');var m=d[g];m.shift();var S=[{title:"Q-Sort",class:"dt-head-center dt-body-center"},{title:u,class:"dt-head-center dt-body-center"}];$("#factorWeightResults"+p).DataTable({retrieve:!0,searching:!1,ordering:!0,order:[[1,"desc"]],info:!1,scrollY:800,scrollCollapse:!0,scrollX:!0,paging:!1,data:m,columns:S,columnDefs:[{targets:[0],className:"dt-body-center dt-body-name"},{targets:"_all",createdCell:function(t,e,a,r,n){e<0&&$(t).css("color","red")}}]}),$("#factorTables").append('<div class="resultsLabel1"><h4>'+v+" - "+n+'</h4></div><table id="factorMiniCorrelResults'+p+'" class="display compact nowrap cell-border stripe"></table>');for(var y=h[g],x=[{title:"Q-Sort",class:"dt-head-center dt-body-center"}],b=1;b<y[0].length;b++){var w={};w.title=y[0][b],w.class="dt-head-center dt-body-center",x.push(w)}y.shift(),$("#factorMiniCorrelResults"+p).DataTable({retrieve:!0,searching:!1,ordering:!1,info:!1,scrollY:800,scrollCollapse:!0,scrollX:!0,paging:!1,data:y,columns:x,columnDefs:[{targets:[0],className:"dt-body-center dt-body-name"},{targets:"_all",createdCell:function(t,e,a,r,n){e<0&&$(t).css("color","red")}}]}),$("#factorTables").append('<div class="resultsLabel1"><h4>'+v+" - "+o+'</h4></div><table id="prelimResults'+p+'" class="display compact nowrap cell-border stripe"></table>');var C=f[g];C.sort(function(t,e){return e[i]===t[i]?t[s]-e[s]:e[i]-t[i]});for(var F=Object.keys(C[0]),I=[{title:s,class:"dt-head-center dt-body-center",data:s},{title:l,class:"dt-head-center dt-body-left",data:l},{data:i,title:i,class:"dt-head-center dt-body-right"},{title:c,class:"dt-head-center dt-body-center",data:c}],A=4;A<F.length;A++){var T={};T.title=F[A],T.class="dt-head-center dt-body-center",T.data=F[A],I.push(T)}$("#prelimResults"+p).DataTable({fixedColumns:{leftColumns:1},retrieve:!0,searching:!1,ordering:!0,order:!1,info:!1,scrollY:800,scrollCollapse:!0,scrollX:!0,paging:!1,data:C,columns:I})}}function n(t){for(var a=0;a<t.length;a++){var r,n,s=evenRound(t[a][2],8),l=evenRound(s*s,8);1===l?(r=l,n=evenRound(s/r,8)):l>1?(r=evenRound(1-l,8),n=evenRound(s/-r,8)):(r=evenRound(1-l,8),n=evenRound(s/r,8)),t[a].push(n)}e.setState("sortWeights",t),o(t)}function o(t){var a=_.filter(t,function(t){return 99!==t[0]}),r=[],n=[];_(a).forEach(function(t){var e=[],a=t[0];r.push(a);var o=t[3];e[0]=a,e[1]=o,n.push(e)}).value();var o=_.cloneDeep(r),l=_.uniq(o),i=[],c=0;_(l).forEach(function(){var t=_(n).filter(function(t){return t[0]===o[c]}),e=[],a=(_(t).forEach(function(t){var a=evenRound(Math.abs(1/t[1]),8);e.push(a)}).value(),_.min(e));i.push(a),c+=1}).value(),e.setState("sigFactorNumbersArray",l),s(t,l,i)}function s(t,e,a){for(var r=[],n=0,o=e.length;n<o;n++)for(var s=0;s<t.length;s++){var i=t[s][0],c=e[n];if(i===c){var u=a[n];t[s][3]=10*evenRound(t[s][3]*u,8),r.push(t[s])}}l(r)}function l(t){function a(t){return evenRound(t*F,8)}for(var r=e.getState("qavRespondentNames"),n=e.getState("positiveShiftedRawSorts"),o=[],s=[],l=0,c=n.length;l<c;l++){for(var u=[],d=UTIL.average(n[l]),h=UTIL.standardDeviation(n[l]),f=0,g=n[l].length;f<g;f++){var p=evenRound((n[l][f]-d)/h,3);u.push(p)}s.push(u)}for(var v=_.zip(r,s),m=0,S=t.length;m<S;m++)for(var y=0,x=v.length;y<x;y++){var b=t[m][1],w=v[y][0],C=v[y][1],F=t[m][3],I=[];if(b===w){var A=_.map(C,a);I.push(t[m][0]),I.push(b),I.push(A),o.push(I)}}i(o)}function i(t){var a,r,n=e.getState("sigFactorNumbersArray"),o=n.sort();r=[];for(var s=[],l=0,i=o.length;l<i;l++){var u=[],d=[],h=o[l];a=[];for(var f={},g=0,p=t.length;g<p;g++){t[g][0]===h&&(d.push(t[g][2]),a.push(t[g][1]))}u.push(h),u.push(a),f["Factor Number"]=h,f.SigSorts=a,s.push(f);for(var v=[],m=0,S=d[0].length;m<S;m++){for(var y=0,x=0,b=d.length;x<b;x++)y=evenRound(y+d[x][m],3);v.push(y)}for(var w=[],C=UTIL.average(v),F=UTIL.standardDeviation(v),I=0,A=v.length;I<A;I++){var T=evenRound((v[I]-C)/F,3);w.push(T)}u.push(w),r.push(u)}e.setState("sigSortsArray",s),c(r)}function c(t){var a=e.getState("qavCurrentStatements"),r=e.getState("sigFactorNumbersArray");r.sort();for(var n=t.length,o=[],s=0;s<n;s++){var l={};l.factor=r[s];for(var i=[],c=[],d=0;d<t[0][2].length;d++){var h={},f=evenRound(t[s][2][d],3);h.factor=r[s],h.statement=d+1,h.sortStatement=a[d],h.zScore=f,c.push(f),i.push(h)}o.push(i),l["FactorZscores"+r[s]]=c}u(o)}function u(t){for(var a=e.getState("qavSortTriangleShape"),r=[],n=0;n<t.length;n++){var o=t[n],s=_.cloneDeep(o);s.sort(function(t,e){return t.zScore===e.zScore?e.statement-t.statement:t.zScore-e.zScore});for(var l=0;l<a.length;l++)s[l].sortValue=a[l],s[l].sigVisualization="";s.sort(function(t,e){return t.statement-e.statement}),r.push(s)}e.setState("analysisOutput",r)}t.showPreliminaryOutput1=function(){for(var a=e.getState("distStatementDataVizArray"),r=e.getState("outputForDataViz"),n=e.getState("userSelectedFactors"),o=e.getState("vizConfig")||{},s=0;s<r.length;s++)for(var l=0;l<a[s].length;l++){var i,c=a[s][l]["No."],u=parseInt(c,10);if(!isNaN(u)){for(var d="Z-SCR-"+n[s],h=a[s][l][d],f=[],g=0;g<n.length;g++){var p="Z-SCR-"+n[g],v=a[s][l][p];f.push(v)}for(var m=_.pull(f,h),S=[],y=[],x=0;x<m.length;x++)h-m[x]>0?y.push("1"):S.push("1");var b;b=m.length===y.length&&n.length>1?!1!==o.shouldUseUnicode?"►":">>":m.length===S.length?!1!==o.shouldUseUnicode?"◄":"<<":"";var w="SIG"+n[s],C=a[s][l][w],F=c-1;"*"===C?i=!1!==o.shouldUseUnicode?"◉":"** ":""===C&&(i=!1!==o.shouldUseUnicode?"◎":"* "),!1!==o.shouldShowZscoreArrows?r[s][F].sigVisualization=i+b:!1===o.shouldShowZscoreArrows&&(r[s][F].sigVisualization=i)}}t.drawSynSortTrianglesForOutput(r,n)},t.drawSynSortTrianglesForOutput=function(a,r){function n(t,a){var r,n=(e.getState("language"),[]);if(!0===F.shouldSetWidthForAsian)a=F.asianStatmentLength||12,n=t.match(new RegExp(".{1,"+a+"}","g"));else for(var o=new RegExp(".{0,"+a+"}(?:\\s|$)","g");""!=(r=o.exec(t));)n.push(r);return n}var o,s,l,i,c,u,d,h=e.getState("qavSortTriangleShape"),f=_.uniq(h),g=(e.getState("qavCurrentStatements"),e.getState("language")),p=resources[g].translation["Synthetic Sort for"],v=resources[g].translation["Distinguishing statement at P < 0.05"],m=resources[g].translation["Distinguishing statement at P < 0.01"],S=resources[g].translation.Legend,y=resources[g].translation["z-Score for the statement is higher than in all of the other factors"],x=resources[g].translation["z-Score for the statement is lower than in all of the other factors"],b=resources[g].translation["Consensus statement (non-significant at P > 0.1)"],w=resources[g].translation["Low number of raw Q-sort matching values (cutoff"],C=resources[g].translation["Consensus statement with low number of matching values"],F=e.getState("vizConfig")||{},I="12px",A=$(".container").width()-40,T=F.consensusCustomColor,z=F.matchCountCustomColor,D=F.overlapCustomColor,k=F.shouldUseToIndicateConsensus,L=F.shouldUseToIndicateMatchCaution,N=F.shouldUseToIndicateOverlap;if("stripe"===k?k="url(#hash4_4)":"color"===k&&(k=T),"color"===L?L=z:"stripe"===L&&(L="url(#hash4_4b)"),"color"===N?N=D:"crosshatch"===N&&(N="url(#crosshatch)"),!0===F.shouldSetCardWidth?(u=F.cardWidth,A=u*f.length+10):u=A/f.length,!0===F.shouldSetFontSize&&(I=F.fontSize+"px"),!0===F.shouldSetCardHeight){var U=F.cardHeight;void 0===U&&(U=110),s=parseInt(U,10)}else s=110;l=!0===F.shouldSetSymbolFontSize?F.sigSymbolFontSize+"px":"12px",i=!0===F.shouldSetLineSpacing?F.lineSpacing:15,!0===F.shouldUseUnicode?(F.legendSymbol05="◎",F.legendSymbol01="◉",F.rightArrow="►",F.leftArrow="◄"):(F.legendSymbol05="*",F.legendSymbol01="**",F.rightArrow=">>",F.leftArrow="<<"),function(t){for(var e=0;e<t.length;e++)for(var a=0;a<t[e].length;a++)!0===F.shouldShowOnlyStateNo?t[e][a].displayStatements=t[e][a].statement:!1===F.shouldPrependStateNo?t[e][a].displayStatements=t[e][a].sortStatement:t[e][a].displayStatements=t[e][a].statement+". "+t[e][a].sortStatement}(a);var R;R=!0===F.shouldShowMatchCounts||F.shouldIndicateDistinguishing?40:void 0===F.shouldIndicateDistinguishing?40:20,!0===F.shouldTrimStatements&&function(t){for(var e=0;e<t.length;e++)for(var a=0;a<t[e].length;a++)if(!0===F.shouldTrimStatements){var r=t[e][a].displayStatements;t[e][a].displayStatements=r.substring(0,F.trimStatementSize)}}(a),!0!==F.shouldShowMatchCounts&&!0!==F.shouldShowBackgroundColor||function(t){for(var a=10,n=e.getState("matchCount"),o=0,s=r.length;o<s;o++){var l=n[o],i=l.slice(0);i.sort(function(t,e){return t.indexer-e.indexer});for(var c=0,u=i.length;c<u;c++)i[c].indexer===t[o][c].statement?(t[o][c].matchingCount=i[c].matchingCounts,t[o][c].matchingCountPercent=i[c].matchingCountsPercent):console.log("error - statement ordering doesn't match");a+=3}e.setState("outputForDataViz",t)}(a);var V=function(t){return"number"==typeof t&&isFinite(t)};!function(){for(var t=e.getState("formattedConsensusStatements"),r=[],n=0,o=t.length;n<o;n++){var s=t[n]["No."];V(s)&&r.push(s)}for(var l=0,i=a.length;l<i;l++)for(var c=0,u=0,d=a[l].length;u<d;u++){var h=r[c];a[l][u].statement===h?(a[l][u].isConsensusState=!0,c++):a[l][u].isConsensusState=!1}}(),!0!==F.shouldShowBackgroundColor&&!0!==F.shouldIndicateConsensus||function(){for(var t,e,r,n=F.backgroundColorCutoff,o=Boolean(F.shouldShowBackgroundColor),s=Boolean(F.shouldIndicateConsensus),l=0,i=a.length;l<i;l++)for(var c=0,u=a[0].length;c<u;c++)t=a[l][c].isConsensusState,r=a[l][c].matchingCountPercent,e=r<=n,a[l][c].displayFill=!0===o&&!0===s?!0===t&&!0===e?N:!0===t&&!1===e?k:!1===t&&!0===e?L:"#ffffff":!0===o&&!1===s?!0===e?L:"#ffffff":!1===o&&!0===s&&!0===t?k:"#ffffff"}();var O,B,P=[];for(B=0;B<f.length;B++)O=function(t,e){var a,r,n=0;for(a=0,r=t.length;a<r;a++)t[a]===e&&n++;return n}(h,f[B]),P.push(O);for(var M=[],E=0,W=0;W<P.length;W++){for(var q=0;q<P[W];q++)M.push(E);E+=1}for(var H,Z=[],j=0;j<P.length;j++){H=0;for(var Q=0;Q<P[j];Q++)Z.push(H),H+=1}var X,Y=(d3.max(Z)+1)*s+50,G=((d3.max(M)+1)*u+20)/2,J=F.statementWidth||6.75;X=!0===F.shouldSetStatementWidth?parseInt((u-J)/6.75,10):parseInt(u/6.75,10),o=function(t){var e=0;!0===F.shouldIndicateDistinguishing&&(e+=60),!0===F.shouldShowZscoreArrows&&!0===F.shouldIndicateDistinguishing&&(e+=60),!0===F.shouldIndicateConsensus&&(e+=30),!0===F.shouldShowZscoreArrows&&(e+=30),!0===F.shouldShowBackgroundColor&&(e+=30),!0===F.shouldIndicateConsensus&&!0===F.shouldShowBackgroundColor&&(e+=30),F.heightAdjustment=e;var a,r=[],n=_.cloneDeep(t);n.sort();for(var o=0;o<n.length;o++)n[o]!==a?r.push(1):r[r.length-1]++,a=n[o];return c=!0===F.shouldHaveLegend?(parseInt(s,10)+10)*d3.max(r)+160+e:(parseInt(s,10)+10)*d3.max(r)+25}(h)+15;for(var K=(F.backgroundColorCutoff,0);K<a.length;K++){var tt=K+1,et="factorVizDiv"+tt;$("#synFactorVizDiv").append("<div id="+et+"></div>");var at="synSortSvgNo"+tt,rt=d3.select("#"+et).append("svg").attr("width",A+10).attr("height",o).attr("id",at).attr("class","factorViz"),nt=a[K],ot=nt.slice(0);ot.sort(function(t,e){return t.zScore===e.zScore?e.statement-t.statement:t.zScore-e.zScore});for(var st=0;st<ot.length;st++)ot[st].xVal=M[st],ot[st].yVal=Z[st];var lt=rt.selectAll("g.node").data(f,function(t){return t}),it=lt.enter().append("g").attr("class","node");it.append("rect").attr("width",u).attr("height","20").attr("x",function(t){return f.indexOf(t)*u+5}).attr("y","45").attr("fill","white").attr("stroke","black"),it.append("text").attr("x",function(t){return f.indexOf(t)*u+u/2+5}).attr("y","58").style("text-anchor","middle").attr("class","headerText").attr("font-family","Arial").attr("font-size","14px").attr("font-weight","bold").attr("fill","black").text(function(t){return t});var ct=rt.selectAll("g.node2").data(ot,function(t){return t.statement}),ut=ct.enter().append("g").attr("class","node2");rt.append("defs").append("pattern").attr({id:"hash4_4",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(60)"}).append("rect").attr({width:"2",height:"8",transform:"translate(0,0)",fill:T}),rt.append("pattern").append("pattern").attr({id:"hash4_4b",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(135)"}).append("rect").attr({width:"2",height:"8",transform:"translate(0,0)",fill:z}),rt.append("pattern").append("pattern").attr({id:"crosshatch",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(135)"}).append("rect").attr({width:"8",height:"8",transform:"translate(0,0)",fill:"white",stroke:D});if(ut.append("rect").attr("width",u).attr("height",s).attr("x",function(t){return t.xVal*u+5}).attr("y",function(t){return t.yVal*s+60}).attr("fill",function(t){return!0===F.shouldShowBackgroundColor||!0===F.shouldIndicateConsensus?t.displayFill:"#ffffff"}).attr("stroke","black"),!1!==F.shouldIndicateDistinguishing&&ut.append("text").attr("width",u).attr("height",s).attr("font-size",l).attr("x",function(t){return t.xVal*u+7}).attr("y",function(t){return t.yVal*s+75}).text(function(t){return t.sigVisualization}),ut.append("text").attr("class","wrap").attr("font-family","Arial").attr("font-size",I).attr("x",function(t){return t.xVal*u+8}).attr("y",function(t){return t.yVal*s+R+35}).attr("dy",0).each(function(t){for(var e=n(t.displayStatements,X),a=0;a<e.length;a++)d3.select(this).append("tspan").attr("dy",i).attr("text-anchor","middle").attr("x",t.xVal*u+u/2).text(e[a])}),!0===F.shouldShowMatchCounts&&ut.append("text").attr("font-family","Arial").attr("font-size",I).attr("x",function(t){return t.xVal*u+.97*u}).attr("y",function(t){return t.yVal*s+83}).style("text-anchor","end").text(function(t){return t.matchingCount+" ("+t.matchingCountPercent+"%)"}),!0===F.shouldHaveLegend){var dt=rt.append("g").attr("class","node3");dt.append("rect").attr("height",50+F.heightAdjustment).attr("width",575).attr("x",G-285).attr("y",Y+35).attr("fill","white").style("stroke","black"),dt.append("text").attr("x",G-8).attr("y",Y+80).attr("class","legendHeader").attr("font-family","Arial").attr("font-size","20px").attr("text-anchor","middle").text(S).attr("font-weight","bold");var ht=80,ft=79;!0===F.shouldIndicateDistinguishing&&(ht+=28,dt.append("text").attr("x",G-285+40).attr("y",Y+ht).attr("font-size",l).text(F.legendSymbol05),ht+=30,dt.append("text").attr("x",G-285+40).attr("y",Y+ht).attr("font-size",l).text(F.legendSymbol01)),!0===F.shouldShowZscoreArrows&&!0===F.shouldIndicateDistinguishing&&(ht+=30,dt.append("text").attr("x",G-285+40).attr("y",Y+ht).attr("font-size",l).text(F.rightArrow),ht+=30,dt.append("text").attr("x",G-285+40).attr("y",Y+ht).attr("font-size",l).text(F.leftArrow)),!0===F.shouldIndicateConsensus&&(ht+=12,dt.append("rect").attr("height",20).attr("width",20).attr("x",G-285+40-2).attr("y",Y+ht).attr("fill",k).style("stroke","black"),ht+=18),!0===F.shouldShowBackgroundColor&&(ht+=12,dt.append("rect").attr("height",20).attr("width",20).attr("x",G-285+40-2).attr("y",Y+ht).attr("fill",L).style("stroke","black"),ht+=18),!0===F.shouldShowBackgroundColor&&!0===F.shouldIndicateConsensus&&(ht+=12,dt.append("rect").attr("height",20).attr("width",20).attr("x",G-285+40-2).attr("y",Y+ht).attr("fill",N).style("stroke","black"),ht+=18),!0===F.shouldIndicateDistinguishing&&(ft+=30,dt.append("text").attr("x",G-285+80).attr("y",Y+ft).attr("font-family","Arial").text(v),ft+=30,dt.append("text").attr("x",G-285+80).attr("y",Y+ft).attr("font-family","Arial").text(m)),!0===F.shouldShowZscoreArrows&&!0===F.shouldIndicateDistinguishing&&(ft+=30,dt.append("text").attr("x",G-285+80).attr("y",Y+ft).attr("font-family","Arial").text(y),ft+=30,dt.append("text").attr("x",G-285+80).attr("y",Y+ft).attr("font-family","Arial").text(x)),!0===F.shouldIndicateConsensus&&(ft+=30,dt.append("text").attr("x",G-285+80).attr("y",Y+ft).attr("font-family","Arial").text(b)),!0===F.shouldShowBackgroundColor&&(ft+=30,dt.append("text").attr("x",G-285+80).attr("y",Y+ft).attr("font-family","Arial").text(w+" "+F.backgroundColorCutoff+"%)")),!0===F.shouldShowBackgroundColor&&!0===F.shouldIndicateConsensus&&(ft+=30,dt.append("text").attr("x",G-285+80).attr("y",Y+ft).attr("font-family","Arial").text(C))}var gt=p+r[K];rt.append("text").attr("x",5).attr("y",28).attr("font-family","Arial").attr("font-size","30px").attr("fill","black").text(gt);var pt=r[K].replace(/\s/g,""),vt=resources[g].translation.downloadImage,mt=$("#"+et);mt.append('<input class="svgDownloadButton blackHover" name="downloadButton" id="'+pt+'Image"   type="button" value="'+r[K]+vt+'" />'),mt.append('<input class="pngDownloadButton blackHover" name="downloadPngButton" id="'+pt+'PngImage"   type="button" value="'+r[K]+' - Download image as PNG" />')}$(".svgDownloadButton").on("mousedown",function(t){var a=e.getState("vizConfig")||{},n=a.shouldAddCustomName,o=$(this).parent().find("svg").attr("id"),s=o.slice(-1)-1,l=r[s],i=l.replace(/\s+/g,""),c=UTIL.currentDate1(),u=UTIL.currentTime1(),h=c+"_"+u,f=e.getState("qavProjectName"),g=a.customName;d=!0===n?"prepend"===a.customNameLocation?{filename:g+"_"+f+"_"+i+"_"+h}:"append"===a.customNameLocation?{filename:f+"_"+i+"_"+h+"_"+g}:"replace"===a.customNameLocation?{filename:g}:{filename:f+"_"+i+"_"+h}:{filename:f+"_"+i+"_"+h},d3_save_svg.save(d3.select("#"+o).node(),d)}),$(".pngDownloadButton").on("mousedown",function(t){var a,n=e.getState("vizConfig")||{},o=n.shouldAddCustomName;console.log(o);var s=$(this).parent().find("svg").attr("id"),l=s.slice(-1)-1,i=r[l],c=i.replace(/\s+/g,""),u=(UTIL.currentDate1(),UTIL.currentTime1(),e.getState("qavProjectName")),d=n.customName;console.log(d),a=!0===o?"prepend"===n.customNameLocation?d+"_"+u+"_"+c:"append"===n.customNameLocation?u+"_"+c+"_"+d:"replace"===n.customNameLocation?d:u+"_"+c:u+"_"+c;var h=UTIL.getSVGString(d3.select("#"+s).node()),f=d3.select("#"+s);UTIL.downloadPngImages(h,f,a)}),t.showPreliminaryOutput1b()},t.showPreliminaryOutput1b=function(){var t=e.getState("language"),a=resources[t].translation["Factor score correlations"];$("#factorCorrelationTableTitle").append("<h4>"+a+"</h4>"),$("#factorCorrelationTableDiv").append('<table id="factorCorrelationTable" class="display compact nowrap cell-border stripe"></table>');for(var n=e.getState("correlationTableArrayHolder"),o=n[0],s=[],l=0;l<o.length;l++){var i={};i.title=o[l],i.class="dt-head-center dt-body-right",s.push(i)}s[0].class="dt-head-center dt-body-center",n.shift(),$("#factorCorrelationTable").DataTable({retrieve:!0,searching:!1,ordering:!1,info:!1,scrollY:350,scrollCollapse:!1,scrollX:!1,paging:!1,data:n,columns:s});var c=$("#factorCorrelationTable").DataTable();$("#factorCorrelationTable tbody").on("mouseover","td",function(){var t=c.cell(this).index().column;null!==t&&($(c.cells().nodes()).removeClass("highlight"),$(c.column(t).nodes()).addClass("highlight"))}).on("mouseleave",function(){$(c.cells().nodes()).removeClass("highlight")}),r()},t.appendFactorSelectionCheckboxes=function(){var t,a,r,n,o,s,l=e.getState("hasSplitFactor"),i=[];if(s=e.getState("numFactorsRetained"),l>0){var c,u,d,h=e.getState("factorLabels");for(o=[],h.shift(),h.shift(),h.shift(),h.pop(),c=0;c<h.length;c++)"flag"!==(u=h[c].title)&&(d=u.replace(/Ftr/g,"Factor"),o.push(d));s=o.length}else if("PCA"===e.typeOfFactor){for(r=0,a=e.numFactorsRetained;r<a;r++)n="factor "+(r+1),i.push(n);o=i}else o=e.getState("factorLabels"),""===o[0]&&o.shift();for(e.setState("factorLabelsArray",o),VIEW.removeOutputFactorCheckboxes(),t=0;t<s;t++){var f=document.createElement("input");f.type="checkbox",f.name="analysisFactors",f.className="factorSelectBox",f.value="value",f.id=o[t];var g=document.createElement("label");g.htmlFor=o[t],g.classList.add("checkboxLabel"),g.appendChild(document.createTextNode(o[t])),document.getElementById("selectFactorsForOutputDiv").appendChild(f),document.getElementById("selectFactorsForOutputDiv").appendChild(g)}},t.getFactorsForAnalysis=function(){for(var t=document.getElementsByName("analysisFactors"),a=[],r=0;r<t.length;r++)t[r].checked&&a.push(t[r].id);e.setState("userSelectedFactors",a)},t.pullFlaggedFactorLoadings=function(){var t,a,r,o,s,l,i=parseInt(e.getState("numberFactorsExtracted")),c=e.getState("results"),u=2*i+3,d=[],h=c.length,f=e.getState("factorLabelsArray"),g=[],p=e.getState("userSelectedFactors");for(t=0;t<h;t++){var v=0,m=[];for(a=4;a<u;a+=2)r=c[t][a],o=f[v],v+=1,s=c[t][1],l=c[t][a-1],"true"===r&&p.indexOf(o)>-1&&(m.push(o,s,l),g.push(o));0===m.length?(m.push(99,s,"Unique Sort"),d.push(m)):d.push(m)}for(var S,y,x=0;x<d.length;x++){d[x].length>3&&(y=d[x][1],S=!1)}var b=0===$(p).not(g).length,w=e.getState("language"),C=resources[w].translation["The sort for respondent"],F=resources[w].translation["is flagged for more than one factor"];return!1===b?(VIEW.showNoSortsFlaggedOnFactorModal(),"false"):!1===S?($("#multipleFlagModalMessageDiv p").remove(),$("#multipleFlagModalMessageDiv").append("<p>"+C+y+F+"</p>"),VIEW.showSortFlaggedOnMultipleFactorsModal(),"false"):(d.sort(function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0}),void n(d))}}(window.PRELIMOUT=window.PRELIMOUT||{},QAV)}});