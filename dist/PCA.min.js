!function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}({10:function(e,t){!function(e,t,a){"use strict";e.doPrincipalComponents=function(a){var r,n,o,s,c,i,l,u,d,g,f,p,S,m=[];for(t.setState("typeOfFactor","PCA"),r=t.getState("totalNumberSorts"),n=t.getState("originalSortSize"),o=t.getState("totalNumberSorts"),s=[8,n,o],c=_.min(s),i=c,t.setState("numberFactorsExtracted",c),t.setState("pcaNumberFactorsExtracted",c),UTIL.addFactorSelectCheckboxesRotation(c),l=0;l<c;l++)m.push("Factor "+(l+1));t.setState("factorLabels",m);var v=UTIL.checkIfOnline();if(!window.Worker||!v){var b,h,E,x,P;b=e.calcSvd(a),h=e.calcEigens(a),d=e.sortEigenValues(h.lambda.x),E=e.calcEigenCumulPercentArray(d,r),g=E[0],f=E[1],x=e.calcEigenVectors(r,i,d,b),u=x[0],P=x[1],u=e.inflectPrincipalComponents(u,P),t.setState("centroidFactors",u),t.setState("eigenValuesSorted",d),t.setState("eigenValuesAsPercents",g),t.setState("eigenValuesCumulPercentArray",f),t.setState("eigenVecs",u);var y=t.getState("language"),T=resources[y].translation["8 Principal Components Extracted"];return $("#rotationHistoryList").append("<li>"+T+"</button></li>"),VIEW.changePcaExtractionButtonDisplay(),e.drawExtractedFactorsTable(),S=d,p=S.slice(0,8),UTIL.drawScreePlot(p),$("#section4 > input").show(),[d,g,f,u]}$("#factorExtractionSpinnerText").css("visibility","visible"),$("#factorExtractionSpinnerDiv").addClass("calcSpinner");var C=[r,i,a],V=new Worker("wrkrs/workerPCA.js");V.postMessage(C),V.onmessage=function(a){u=a.data[0],d=a.data[1],g=a.data[2],f=a.data[3],t.setState("centroidFactors",u),t.setState("eigenValuesSorted",d),t.setState("eigenValuesAsPercents",g),t.setState("eigenValuesCumulPercentArray",f),t.setState("eigenVecs",u);var r=t.getState("language"),n=resources[r].translation["8 Principal Components Extracted"];return $("#rotationHistoryList").append("<li>"+n+"</button></li>"),$("#factorExtractionSpinnerText").css("visibility","hidden"),$("#factorExtractionSpinnerDiv").removeClass("calcSpinner"),VIEW.changePcaExtractionButtonDisplay(),e.drawExtractedFactorsTable(),S=d,p=S.slice(0,8),UTIL.drawScreePlot(p),$("#section4 > input").show(),[d,g,f,u]}},e.inflectPrincipalComponents=function(e,t){for(var a=0;a<e[0].length;a++)if(t[a]<0)for(var r=0;r<e.length;r++)e[r][a]=-e[r][a];return e},e.calcEigenVectors=function(e,t,a,r){for(var n,o,s,c,i=[],l=[],u=0;u<e;u++)l.push([]);for(var d=0,g=t;d<g;d++){n=Math.sqrt(a[d]),o=0;for(var f=0,p=r.length;f<p;f++)s=evenRound(r[f][d]*n,8),l[f][d]=s,c=evenRound(s*Math.abs(s),8),o+=c;i.push(evenRound(o,8))}return[l,i]},e.calcEigenCumulPercentArray=function(e,t){for(var a,r=100/t,n=[],o=[],s=0,c=0,i=e.length;c<i;c++)e[c]=evenRound(e[c],8),a=evenRound(e[c]*r,0),n.push(a),s+=a,o.push(s);return[n,o]},e.sortEigenValues=function(e){return e.sort(function(e,t){return t-e}),e},e.calcSvd=function(e){var t,a;return t=e.length,a=numeric.div(numeric.dot(numeric.transpose(e),e),t),numeric.svd(a).U},e.calcEigens=function(e){return numeric.eig(e)},e.drawExtractedFactorsTable=function(){var a,r,n,o,s,c,i,l,u=t.getState("eigenVecs");for(n=t.getState("respondentNames"),a=0;a<u.length;a++)r=a+1,u[a].unshift(r,n[r]);var d=t.getState("language"),g=resources[d].translation.Factor;o=[{title:"Number"},{title:resources[d].translation.Respondent},{title:g+" 1"},{title:g+" 2"},{title:g+" 3"},{title:g+" 4"},{title:g+" 5"},{title:g+" 6"},{title:g+" 7"},{title:g+" 8"}],i=[2,3,4,5,6,7,8,9],s=t.pcaNumberFactorsExtracted+2,c=o.slice(0,s),l=i.slice(0,t.pcaNumberFactorsExtracted),t.pcaTableHeaders=c,t.pcaTableTargets=l;var f={};f.domElement="#factorRotationTable1",f.fixed=!1,f.data=u,f.headers=c,f.colDefs=[{targets:[0,1],className:"dt-head-center dt-body-center dt-body-name"},{targets:l,className:"dt-head-center dt-body-right"},{targets:"_all",createdCell:function(e,t,a,r,n){t<0&&$(e).css("color","red")}}],UTIL.drawDatatable(f),e.createFooter()},e.createFooter=function(){var e,a,r,n,o,s,c,i,l=t.getState("language"),u=resources[l].translation["Cum % Expln Var"],d=resources[l].translation["% explained variance"],g=resources[l].translation.Eigenvalues;e=t.getState("eigenValuesSorted"),e.unshift("",g),o=e.slice(0,10),a=t.getState("eigenValuesAsPercents"),a.unshift("",d),s=a.slice(0,10),r=t.getState("eigenValuesCumulPercentArray"),r.unshift("",u),c=r.slice(0,10),n=[],n.push(o,s,c),i=t.getState("pcaTableHeaders"),i[0].title="",i[0].sTitle="",i[1].title="",i[1].sTitle="";var f={};f.domElement="#factorRotationTable1Footer",f.fixed=!1,f.data=n,f.ordering=!1,f.headers=i,f.colDefs=[{targets:[0,1],className:"dt-head-center dt-body-center dt-body-name"},{targets:_.clone(t.pcaTableTargets),className:"dt-head-center dt-body-right"},{targets:"_all",createdCell:function(e,t,a,r,n){t<0&&$(e).css("color","red")}}],UTIL.drawDatatable(f)}}(window.PCA=window.PCA||{},QAV)}});